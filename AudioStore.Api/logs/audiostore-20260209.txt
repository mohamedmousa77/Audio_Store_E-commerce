2026-02-09 01:59:03.723 +01:00 [INF] Starting AudioStore API {"MachineName":"MOHAMEDMOUSA","ThreadId":2,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:04.861 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development. {"EventId":{"Id":10400,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.SensitiveDataLoggingEnabledWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"MOHAMEDMOUSA","ThreadId":2,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:06.351 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:06.391 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:06.442 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:06.460 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:06.465 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:06.484 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:06.508 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:06.528 +01:00 [INF] Starting database seeding... {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:06.761 +01:00 [INF] Executed DbCommand (32ms) [Parameters=[@normalizedName='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[CreatedAt], [r].[Description], [r].[IsSystemRole], [r].[Name], [r].[NormalizedName], [r].[UpdatedAt]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @normalizedName {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:06.814 +01:00 [INF] Role 'Administrator' already exists {"SourceContext":"AudioStore.Infrastructure.Identity.RoleSeeder","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:06.821 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@normalizedName='CUSTOMER' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[CreatedAt], [r].[Description], [r].[IsSystemRole], [r].[Name], [r].[NormalizedName], [r].[UpdatedAt]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @normalizedName {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:06.826 +01:00 [INF] Role 'Customer' already exists {"SourceContext":"AudioStore.Infrastructure.Identity.RoleSeeder","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:06.845 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@normalizedEmail='ADMIN@AUDIOSTORE.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[CreatedById], [u].[Email], [u].[EmailConfirmed], [u].[FirstName], [u].[IsActive], [u].[IsDeleted], [u].[LastName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[ModifiedById], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RegistrationDate], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @normalizedEmail {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:06.885 +01:00 [INF] Admin user already exists: admin@audiostore.com {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:06.909 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:06.916 +01:00 [INF] Categories already exist, skipping seed {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:07.085 +01:00 [INF] Executed DbCommand (131ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:07.095 +01:00 [INF] Products already exist, skipping seed {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:07.098 +01:00 [INF] Database seeding completed successfully! {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:07.447 +01:00 [WRN] The ASP.NET Core developer certificate is not trusted. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert {"EventId":{"Id":8,"Name":"DeveloperCertificateNotTrusted"},"SourceContext":"Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:14.441 +01:00 [INF] HTTP OPTIONS /api/v1.0/cart responded 204 in 4.9355 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7EPMQARQ8:00000001","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:14.456 +01:00 [INF] HTTP OPTIONS /api/v1.0/products/featured responded 204 in 0.3418 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7EPMQARQ8:00000005","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":14,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:14.457 +01:00 [INF] HTTP OPTIONS /api/v1.0/categories responded 204 in 0.5065 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7EPMQARQ8:00000007","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:14.460 +01:00 [INF] HTTP OPTIONS /api/v1.0/products responded 204 in 0.0598 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7EPMQARQ8:00000003","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":18,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:14.755 +01:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license. {"SourceContext":"LuckyPennySoftware.AutoMapper.License","ActionId":"f7f0dbc3-6eb8-4b57-9114-b6c15fc2b8e0","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:00000009","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:14.779 +01:00 [INF] Getting all categories {"SourceContext":"AudioStore.Api.Controllers.CategoriesController","ActionId":"6d920ac8-1a50-43b1-91b8-2f918f2618f3","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000000D","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":14,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:14.780 +01:00 [INF] Getting cart for user: null or session: e476a691-25fd-4691-9d90-fbcb4b3df7e1 {"SourceContext":"AudioStore.Api.Controllers.CartController","ActionId":"f7f0dbc3-6eb8-4b57-9114-b6c15fc2b8e0","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:00000009","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:14.791 +01:00 [INF] Getting 10 featured products {"SourceContext":"AudioStore.Api.Controllers.ProductsController","ActionId":"013e9677-5efc-4d3b-a60d-49523b096d6f","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000000B","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":17,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:14.802 +01:00 [INF] Getting products with filter {"SourceContext":"AudioStore.Api.Controllers.ProductsController","ActionId":"66324719-fb3b-4f69-a64f-688ace20d2df","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000000F","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":19,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:14.844 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit) {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"6d920ac8-1a50-43b1-91b8-2f918f2618f3","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000000D","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":18,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:15.042 +01:00 [ERR] Error setting cache key: categories:all {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"6d920ac8-1a50-43b1-91b8-2f918f2618f3","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000000D","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":18,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 01:59:15.116 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@filter_IsNew_Value='True'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Products] AS [p]
WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsAvailable] = @filter_IsNew_Value {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"66324719-fb3b-4f69-a64f-688ace20d2df","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000000F","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:15.198 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p='10'], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[ProductID], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt], [p0].[CreatedById], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt], [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM (
    SELECT TOP(@p) [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
    FROM [Products] AS [p]
    WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsFeatured] = CAST(1 AS bit) AND [p].[IsAvailable] = CAST(1 AS bit) AND [p].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [p].[CreatedAt] DESC
) AS [p0]
INNER JOIN [Categories] AS [c] ON [p0].[CategoryId] = [c].[CategoryID]
ORDER BY [p0].[CreatedAt] DESC {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"013e9677-5efc-4d3b-a60d-49523b096d6f","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000000B","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:15.206 +01:00 [INF] HTTP GET /api/v1.0/categories responded 200 in 643.0730 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7EPMQARQ8:0000000D","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":18,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:15.230 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@sessionId='e476a691-25fd-4691-9d90-fbcb4b3df7e1' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[CartID], [c1].[CreatedAt], [c1].[CreatedById], [c1].[IsActive], [c1].[IsDeleted], [c1].[ModifiedById], [c1].[SessionId], [c1].[UpdatedAt], [c1].[UserId], [s].[CartItemID], [s].[CartId], [s].[CreatedAt], [s].[CreatedById], [s].[IsDeleted], [s].[ModifiedById], [s].[ProductId], [s].[Quantity], [s].[UnitPrice], [s].[UpdatedAt], [s].[ProductID0], [s].[Brand], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedById0], [s].[Description], [s].[Features], [s].[GalleryImages], [s].[IsAvailable], [s].[IsDeleted0], [s].[IsFeatured], [s].[IsNewProduct], [s].[IsPublished], [s].[MainImage], [s].[ModifiedById0], [s].[Name], [s].[Price], [s].[Slug], [s].[StockQuantity], [s].[UpdatedAt0]
FROM (
    SELECT TOP(1) [c].[CartID], [c].[CreatedAt], [c].[CreatedById], [c].[IsActive], [c].[IsDeleted], [c].[ModifiedById], [c].[SessionId], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[SessionId] = @sessionId AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN (
    SELECT [c0].[CartItemID], [c0].[CartId], [c0].[CreatedAt], [c0].[CreatedById], [c0].[IsDeleted], [c0].[ModifiedById], [c0].[ProductId], [c0].[Quantity], [c0].[UnitPrice], [c0].[UpdatedAt], [p0].[ProductID] AS [ProductID0], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt] AS [CreatedAt0], [p0].[CreatedById] AS [CreatedById0], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted] AS [IsDeleted0], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById] AS [ModifiedById0], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt] AS [UpdatedAt0]
    FROM [CartItems] AS [c0]
    INNER JOIN (
        SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)
    ) AS [p0] ON [c0].[ProductId] = [p0].[ProductID]
    WHERE [c0].[IsDeleted] = CAST(0 AS bit)
) AS [s] ON [c1].[CartID] = [s].[CartId]
ORDER BY [c1].[CartID], [s].[CartItemID] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"f7f0dbc3-6eb8-4b57-9114-b6c15fc2b8e0","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:00000009","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:15.296 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@filter_IsNew_Value='True', @p='0', @p2='12'], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[ProductID], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt], [p0].[CreatedById], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt], [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM (
    SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
    FROM [Products] AS [p]
    WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsAvailable] = @filter_IsNew_Value
    ORDER BY [p].[Name]
    OFFSET @p ROWS FETCH NEXT @p2 ROWS ONLY
) AS [p0]
INNER JOIN [Categories] AS [c] ON [p0].[CategoryId] = [c].[CategoryID]
ORDER BY [p0].[Name] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"66324719-fb3b-4f69-a64f-688ace20d2df","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000000F","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":18,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:15.441 +01:00 [ERR] Error setting cache key: products:featured:10 {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"013e9677-5efc-4d3b-a60d-49523b096d6f","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000000B","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 01:59:15.534 +01:00 [ERR] Error setting cache key: products:all:1:12 {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"66324719-fb3b-4f69-a64f-688ace20d2df","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000000F","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":18,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 01:59:15.603 +01:00 [INF] HTTP GET /api/v1.0/products/featured responded 200 in 1116.1442 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7EPMQARQ8:0000000B","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:15.633 +01:00 [INF] HTTP GET /api/v1.0/cart responded 200 in 1161.2534 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7EPMQARQ8:00000009","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:15.657 +01:00 [INF] HTTP GET /api/v1.0/products responded 200 in 1071.6603 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7EPMQARQ8:0000000F","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":18,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:27.447 +01:00 [INF] HTTP OPTIONS /api/v1.0/products/5 responded 204 in 0.1950 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7EPMQARQ8:00000011","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":19,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:27.511 +01:00 [INF] Getting product by ID: 5 {"SourceContext":"AudioStore.Api.Controllers.ProductsController","ActionId":"81969f90-a173-45b2-99af-df6da9a1e2d6","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProductById (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:00000013","RequestPath":"/api/v1.0/products/5","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":14,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:27.595 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@id='5'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt], [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM [Products] AS [p]
INNER JOIN [Categories] AS [c] ON [p].[CategoryId] = [c].[CategoryID]
WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[ProductID] = @id {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"81969f90-a173-45b2-99af-df6da9a1e2d6","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProductById (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:00000013","RequestPath":"/api/v1.0/products/5","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":14,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:27.708 +01:00 [ERR] Error setting cache key: products:id:5 {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"81969f90-a173-45b2-99af-df6da9a1e2d6","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProductById (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:00000013","RequestPath":"/api/v1.0/products/5","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":14,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 01:59:27.724 +01:00 [INF] HTTP GET /api/v1.0/products/5 responded 200 in 234.3438 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7EPMQARQ8:00000013","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":14,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:29.937 +01:00 [INF] HTTP OPTIONS /api/v1.0/products responded 204 in 0.0937 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7EPMQARQ8:00000015","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":18,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:29.937 +01:00 [INF] HTTP OPTIONS /api/v1.0/products/featured responded 204 in 0.0635 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7EPMQARQ8:00000017","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":14,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:29.938 +01:00 [INF] HTTP OPTIONS /api/v1.0/categories responded 204 in 0.0893 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7EPMQARQ8:00000019","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:29.968 +01:00 [INF] Getting products with filter {"SourceContext":"AudioStore.Api.Controllers.ProductsController","ActionId":"66324719-fb3b-4f69-a64f-688ace20d2df","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000001B","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":19,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:29.990 +01:00 [INF] Getting 10 featured products {"SourceContext":"AudioStore.Api.Controllers.ProductsController","ActionId":"013e9677-5efc-4d3b-a60d-49523b096d6f","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000001D","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":18,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:30.012 +01:00 [INF] Getting all categories {"SourceContext":"AudioStore.Api.Controllers.CategoriesController","ActionId":"6d920ac8-1a50-43b1-91b8-2f918f2618f3","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000001F","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:30.030 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@filter_IsNew_Value='True'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Products] AS [p]
WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsAvailable] = @filter_IsNew_Value {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"66324719-fb3b-4f69-a64f-688ace20d2df","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000001B","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":14,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:30.045 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p='10'], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[ProductID], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt], [p0].[CreatedById], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt], [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM (
    SELECT TOP(@p) [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
    FROM [Products] AS [p]
    WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsFeatured] = CAST(1 AS bit) AND [p].[IsAvailable] = CAST(1 AS bit) AND [p].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [p].[CreatedAt] DESC
) AS [p0]
INNER JOIN [Categories] AS [c] ON [p0].[CategoryId] = [c].[CategoryID]
ORDER BY [p0].[CreatedAt] DESC {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"013e9677-5efc-4d3b-a60d-49523b096d6f","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000001D","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":19,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:30.064 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit) {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"6d920ac8-1a50-43b1-91b8-2f918f2618f3","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000001F","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:30.094 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@filter_IsNew_Value='True', @p='0', @p2='12'], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[ProductID], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt], [p0].[CreatedById], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt], [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM (
    SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
    FROM [Products] AS [p]
    WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsAvailable] = @filter_IsNew_Value
    ORDER BY [p].[Name]
    OFFSET @p ROWS FETCH NEXT @p2 ROWS ONLY
) AS [p0]
INNER JOIN [Categories] AS [c] ON [p0].[CategoryId] = [c].[CategoryID]
ORDER BY [p0].[Name] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"66324719-fb3b-4f69-a64f-688ace20d2df","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000001B","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":14,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:30.155 +01:00 [ERR] Error setting cache key: products:featured:10 {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"013e9677-5efc-4d3b-a60d-49523b096d6f","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000001D","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":19,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 01:59:30.197 +01:00 [ERR] Error setting cache key: categories:all {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"6d920ac8-1a50-43b1-91b8-2f918f2618f3","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000001F","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 01:59:30.238 +01:00 [ERR] Error setting cache key: products:all:1:12 {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"66324719-fb3b-4f69-a64f-688ace20d2df","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000001B","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":14,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 01:59:30.248 +01:00 [INF] HTTP GET /api/v1.0/products/featured responded 200 in 258.2231 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7EPMQARQ8:0000001D","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":19,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:30.254 +01:00 [INF] HTTP GET /api/v1.0/categories responded 200 in 242.8202 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7EPMQARQ8:0000001F","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:30.259 +01:00 [INF] HTTP GET /api/v1.0/products responded 200 in 293.7020 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7EPMQARQ8:0000001B","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":14,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:31.867 +01:00 [INF] HTTP OPTIONS /api/v1.0/products/2 responded 204 in 0.1695 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7EPMQARQ8:00000021","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":14,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:31.882 +01:00 [INF] Getting product by ID: 2 {"SourceContext":"AudioStore.Api.Controllers.ProductsController","ActionId":"81969f90-a173-45b2-99af-df6da9a1e2d6","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProductById (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:00000023","RequestPath":"/api/v1.0/products/2","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":16,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:31.898 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@id='2'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt], [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM [Products] AS [p]
INNER JOIN [Categories] AS [c] ON [p].[CategoryId] = [c].[CategoryID]
WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[ProductID] = @id {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"81969f90-a173-45b2-99af-df6da9a1e2d6","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProductById (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:00000023","RequestPath":"/api/v1.0/products/2","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":16,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:31.955 +01:00 [ERR] Error setting cache key: products:id:2 {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"81969f90-a173-45b2-99af-df6da9a1e2d6","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProductById (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:00000023","RequestPath":"/api/v1.0/products/2","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":16,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 01:59:31.969 +01:00 [INF] HTTP GET /api/v1.0/products/2 responded 200 in 87.1853 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7EPMQARQ8:00000023","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":16,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:35.306 +01:00 [INF] HTTP OPTIONS /api/v1.0/products responded 204 in 0.0913 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7EPMQARQ8:00000025","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":19,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:35.306 +01:00 [INF] HTTP OPTIONS /api/v1.0/products/featured responded 204 in 0.0608 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7EPMQARQ8:00000027","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":18,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:35.306 +01:00 [INF] HTTP OPTIONS /api/v1.0/categories responded 204 in 0.0492 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7EPMQARQ8:00000029","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":14,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:35.344 +01:00 [INF] Getting products with filter {"SourceContext":"AudioStore.Api.Controllers.ProductsController","ActionId":"66324719-fb3b-4f69-a64f-688ace20d2df","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000002B","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:35.366 +01:00 [INF] Getting 10 featured products {"SourceContext":"AudioStore.Api.Controllers.ProductsController","ActionId":"013e9677-5efc-4d3b-a60d-49523b096d6f","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000002D","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":19,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:35.376 +01:00 [INF] Getting all categories {"SourceContext":"AudioStore.Api.Controllers.CategoriesController","ActionId":"6d920ac8-1a50-43b1-91b8-2f918f2618f3","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000002F","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":14,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:35.387 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@filter_IsNew_Value='True'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Products] AS [p]
WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsAvailable] = @filter_IsNew_Value {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"66324719-fb3b-4f69-a64f-688ace20d2df","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000002B","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":18,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:35.394 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p='10'], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[ProductID], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt], [p0].[CreatedById], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt], [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM (
    SELECT TOP(@p) [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
    FROM [Products] AS [p]
    WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsFeatured] = CAST(1 AS bit) AND [p].[IsAvailable] = CAST(1 AS bit) AND [p].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [p].[CreatedAt] DESC
) AS [p0]
INNER JOIN [Categories] AS [c] ON [p0].[CategoryId] = [c].[CategoryID]
ORDER BY [p0].[CreatedAt] DESC {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"013e9677-5efc-4d3b-a60d-49523b096d6f","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000002D","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":17,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:35.406 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit) {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"6d920ac8-1a50-43b1-91b8-2f918f2618f3","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000002F","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":14,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:35.421 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@filter_IsNew_Value='True', @p='0', @p2='12'], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[ProductID], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt], [p0].[CreatedById], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt], [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM (
    SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
    FROM [Products] AS [p]
    WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsAvailable] = @filter_IsNew_Value
    ORDER BY [p].[Name]
    OFFSET @p ROWS FETCH NEXT @p2 ROWS ONLY
) AS [p0]
INNER JOIN [Categories] AS [c] ON [p0].[CategoryId] = [c].[CategoryID]
ORDER BY [p0].[Name] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"66324719-fb3b-4f69-a64f-688ace20d2df","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000002B","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":18,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:35.458 +01:00 [ERR] Error setting cache key: products:featured:10 {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"013e9677-5efc-4d3b-a60d-49523b096d6f","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000002D","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":17,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 01:59:35.529 +01:00 [ERR] Error setting cache key: categories:all {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"6d920ac8-1a50-43b1-91b8-2f918f2618f3","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000002F","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":14,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 01:59:35.611 +01:00 [ERR] Error setting cache key: products:all:1:12 {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"66324719-fb3b-4f69-a64f-688ace20d2df","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:0000002B","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":18,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 01:59:35.632 +01:00 [INF] HTTP GET /api/v1.0/products/featured responded 200 in 266.2635 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7EPMQARQ8:0000002D","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":17,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:35.642 +01:00 [INF] HTTP GET /api/v1.0/categories responded 200 in 267.2407 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7EPMQARQ8:0000002F","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":14,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:35.655 +01:00 [INF] HTTP GET /api/v1.0/products responded 200 in 313.4393 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7EPMQARQ8:0000002B","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":18,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:37.790 +01:00 [INF] HTTP OPTIONS /api/v1.0/cart responded 204 in 0.2105 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7EPMQARQ8:00000031","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":18,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:37.805 +01:00 [INF] Getting cart for user: null or session: e476a691-25fd-4691-9d90-fbcb4b3df7e1 {"SourceContext":"AudioStore.Api.Controllers.CartController","ActionId":"f7f0dbc3-6eb8-4b57-9114-b6c15fc2b8e0","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:00000033","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:37.821 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@sessionId='e476a691-25fd-4691-9d90-fbcb4b3df7e1' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[CartID], [c1].[CreatedAt], [c1].[CreatedById], [c1].[IsActive], [c1].[IsDeleted], [c1].[ModifiedById], [c1].[SessionId], [c1].[UpdatedAt], [c1].[UserId], [s].[CartItemID], [s].[CartId], [s].[CreatedAt], [s].[CreatedById], [s].[IsDeleted], [s].[ModifiedById], [s].[ProductId], [s].[Quantity], [s].[UnitPrice], [s].[UpdatedAt], [s].[ProductID0], [s].[Brand], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedById0], [s].[Description], [s].[Features], [s].[GalleryImages], [s].[IsAvailable], [s].[IsDeleted0], [s].[IsFeatured], [s].[IsNewProduct], [s].[IsPublished], [s].[MainImage], [s].[ModifiedById0], [s].[Name], [s].[Price], [s].[Slug], [s].[StockQuantity], [s].[UpdatedAt0]
FROM (
    SELECT TOP(1) [c].[CartID], [c].[CreatedAt], [c].[CreatedById], [c].[IsActive], [c].[IsDeleted], [c].[ModifiedById], [c].[SessionId], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[SessionId] = @sessionId AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN (
    SELECT [c0].[CartItemID], [c0].[CartId], [c0].[CreatedAt], [c0].[CreatedById], [c0].[IsDeleted], [c0].[ModifiedById], [c0].[ProductId], [c0].[Quantity], [c0].[UnitPrice], [c0].[UpdatedAt], [p0].[ProductID] AS [ProductID0], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt] AS [CreatedAt0], [p0].[CreatedById] AS [CreatedById0], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted] AS [IsDeleted0], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById] AS [ModifiedById0], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt] AS [UpdatedAt0]
    FROM [CartItems] AS [c0]
    INNER JOIN (
        SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)
    ) AS [p0] ON [c0].[ProductId] = [p0].[ProductID]
    WHERE [c0].[IsDeleted] = CAST(0 AS bit)
) AS [s] ON [c1].[CartID] = [s].[CartId]
ORDER BY [c1].[CartID], [s].[CartItemID] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"f7f0dbc3-6eb8-4b57-9114-b6c15fc2b8e0","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:00000033","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 01:59:37.851 +01:00 [INF] HTTP GET /api/v1.0/cart responded 200 in 47.0208 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7EPMQARQ8:00000033","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:00:12.461 +01:00 [INF] HTTP OPTIONS /api/v1.0/orders responded 204 in 0.0860 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7EPMQARQ8:00000035","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:00:12.543 +01:00 [INF] Creating order for user: null {"SourceContext":"AudioStore.Api.Controllers.OrdersController","ActionId":"d61431b5-0308-4651-afec-f761d7f6ccc4","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:00000037","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":19,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:00:12.631 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'AudioStore.Infrastructure.Data.AppDbContext'.
System.InvalidOperationException: The configured execution strategy 'SqlServerRetryingExecutionStrategy' does not support user-initiated transactions. Use the execution strategy returned by 'DbContext.Database.CreateExecutionStrategy()' to execute all the operations in the transaction as a retriable unit.
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.OnFirstExecution()
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"d61431b5-0308-4651-afec-f761d7f6ccc4","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:00000037","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":19,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: The configured execution strategy 'SqlServerRetryingExecutionStrategy' does not support user-initiated transactions. Use the execution strategy returned by 'DbContext.Database.CreateExecutionStrategy()' to execute all the operations in the transaction as a retriable unit.
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.OnFirstExecution()
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2026-02-09 02:00:12.885 +01:00 [ERR] Error creating order {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"d61431b5-0308-4651-afec-f761d7f6ccc4","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7EPMQARQ8:00000037","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":19,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: The configured execution strategy 'SqlServerRetryingExecutionStrategy' does not support user-initiated transactions. Use the execution strategy returned by 'DbContext.Database.CreateExecutionStrategy()' to execute all the operations in the transaction as a retriable unit.
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.OnFirstExecution()
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at AudioStore.Application.Services.Implementations.OrderService.GenerateOrderNumberAsync() in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Application\Services\Implementations\OrderService.cs:line 445
   at AudioStore.Application.Services.Implementations.OrderService.CreateOrderAsync(CreateOrderDTO dto) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Application\Services\Implementations\OrderService.cs:line 46
2026-02-09 02:00:12.915 +01:00 [INF] HTTP POST /api/v1.0/orders responded 400 in 428.9088 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7EPMQARQ8:00000037","ConnectionId":"0HNJ7EPMQARQ8","MachineName":"MOHAMEDMOUSA","ThreadId":19,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:15:51.960 +01:00 [INF] Starting AudioStore API {"MachineName":"MOHAMEDMOUSA","ThreadId":2,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:15:57.826 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development. {"EventId":{"Id":10400,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.SensitiveDataLoggingEnabledWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"MOHAMEDMOUSA","ThreadId":2,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:00.376 +01:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:00.445 +01:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:00.548 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:00.600 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":15,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:00.616 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":15,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:00.643 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":15,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:00.680 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":15,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:00.699 +01:00 [INF] Starting database seeding... {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":15,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:01.183 +01:00 [INF] Executed DbCommand (68ms) [Parameters=[@normalizedName='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[CreatedAt], [r].[Description], [r].[IsSystemRole], [r].[Name], [r].[NormalizedName], [r].[UpdatedAt]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @normalizedName {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":15,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:01.275 +01:00 [INF] Role 'Administrator' already exists {"SourceContext":"AudioStore.Infrastructure.Identity.RoleSeeder","MachineName":"MOHAMEDMOUSA","ThreadId":15,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:01.295 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@normalizedName='CUSTOMER' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[CreatedAt], [r].[Description], [r].[IsSystemRole], [r].[Name], [r].[NormalizedName], [r].[UpdatedAt]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @normalizedName {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:01.340 +01:00 [INF] Role 'Customer' already exists {"SourceContext":"AudioStore.Infrastructure.Identity.RoleSeeder","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:01.398 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@normalizedEmail='ADMIN@AUDIOSTORE.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[CreatedById], [u].[Email], [u].[EmailConfirmed], [u].[FirstName], [u].[IsActive], [u].[IsDeleted], [u].[LastName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[ModifiedById], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RegistrationDate], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @normalizedEmail {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:01.455 +01:00 [INF] Admin user already exists: admin@audiostore.com {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:01.502 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:01.522 +01:00 [INF] Categories already exist, skipping seed {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:01.549 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:01.569 +01:00 [INF] Products already exist, skipping seed {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:01.586 +01:00 [INF] Database seeding completed successfully! {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:02.094 +01:00 [WRN] The ASP.NET Core developer certificate is not trusted. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert {"EventId":{"Id":8,"Name":"DeveloperCertificateNotTrusted"},"SourceContext":"Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:12.086 +01:00 [INF] HTTP OPTIONS /api/v1.0/products responded 204 in 9.3758 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F3578LF5:00000003","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:12.086 +01:00 [INF] HTTP OPTIONS /api/v1.0/products/featured responded 204 in 9.3637 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F3578LF5:00000005","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":19,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:12.086 +01:00 [INF] HTTP OPTIONS /api/v1.0/categories responded 204 in 9.4302 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F3578LF5:00000007","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:12.086 +01:00 [INF] HTTP OPTIONS /api/v1.0/cart responded 204 in 9.3944 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F3578LF5:00000001","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":17,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:14.826 +01:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license. {"SourceContext":"LuckyPennySoftware.AutoMapper.License","ActionId":"ae3cdff9-625f-48ef-8f4e-7400610f7425","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:0000000F","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":17,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:14.878 +01:00 [INF] Getting all categories {"SourceContext":"AudioStore.Api.Controllers.CategoriesController","ActionId":"90b4602e-049d-48d7-bf1a-4391bb5328be","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:0000000D","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":19,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:14.881 +01:00 [INF] Getting cart for user: null or session: e476a691-25fd-4691-9d90-fbcb4b3df7e1 {"SourceContext":"AudioStore.Api.Controllers.CartController","ActionId":"ae3cdff9-625f-48ef-8f4e-7400610f7425","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:0000000F","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":17,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:14.892 +01:00 [INF] Getting 10 featured products {"SourceContext":"AudioStore.Api.Controllers.ProductsController","ActionId":"86b15426-60fd-4a84-813a-aeca266e79df","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:0000000B","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":15,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:14.904 +01:00 [INF] Getting products with filter {"SourceContext":"AudioStore.Api.Controllers.ProductsController","ActionId":"e4696aa6-44f7-4b53-ad52-b1a28ecd9b89","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000009","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":16,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:14.943 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit) {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"90b4602e-049d-48d7-bf1a-4391bb5328be","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:0000000D","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":23,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:15.117 +01:00 [ERR] Error setting cache key: categories:all {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"90b4602e-049d-48d7-bf1a-4391bb5328be","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:0000000D","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":23,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 02:16:15.166 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@filter_IsNew_Value='True'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Products] AS [p]
WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsAvailable] = @filter_IsNew_Value {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"e4696aa6-44f7-4b53-ad52-b1a28ecd9b89","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000009","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:15.180 +01:00 [INF] HTTP GET /api/v1.0/categories responded 200 in 3028.9786 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F3578LF5:0000000D","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":23,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:15.188 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p='10'], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[ProductID], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt], [p0].[CreatedById], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt], [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM (
    SELECT TOP(@p) [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
    FROM [Products] AS [p]
    WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsFeatured] = CAST(1 AS bit) AND [p].[IsAvailable] = CAST(1 AS bit) AND [p].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [p].[CreatedAt] DESC
) AS [p0]
INNER JOIN [Categories] AS [c] ON [p0].[CategoryId] = [c].[CategoryID]
ORDER BY [p0].[CreatedAt] DESC {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"86b15426-60fd-4a84-813a-aeca266e79df","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:0000000B","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":19,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:15.209 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@sessionId='e476a691-25fd-4691-9d90-fbcb4b3df7e1' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[CartID], [c1].[CreatedAt], [c1].[CreatedById], [c1].[IsActive], [c1].[IsDeleted], [c1].[ModifiedById], [c1].[SessionId], [c1].[UpdatedAt], [c1].[UserId], [s].[CartItemID], [s].[CartId], [s].[CreatedAt], [s].[CreatedById], [s].[IsDeleted], [s].[ModifiedById], [s].[ProductId], [s].[Quantity], [s].[UnitPrice], [s].[UpdatedAt], [s].[ProductID0], [s].[Brand], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedById0], [s].[Description], [s].[Features], [s].[GalleryImages], [s].[IsAvailable], [s].[IsDeleted0], [s].[IsFeatured], [s].[IsNewProduct], [s].[IsPublished], [s].[MainImage], [s].[ModifiedById0], [s].[Name], [s].[Price], [s].[Slug], [s].[StockQuantity], [s].[UpdatedAt0]
FROM (
    SELECT TOP(1) [c].[CartID], [c].[CreatedAt], [c].[CreatedById], [c].[IsActive], [c].[IsDeleted], [c].[ModifiedById], [c].[SessionId], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[SessionId] = @sessionId AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN (
    SELECT [c0].[CartItemID], [c0].[CartId], [c0].[CreatedAt], [c0].[CreatedById], [c0].[IsDeleted], [c0].[ModifiedById], [c0].[ProductId], [c0].[Quantity], [c0].[UnitPrice], [c0].[UpdatedAt], [p0].[ProductID] AS [ProductID0], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt] AS [CreatedAt0], [p0].[CreatedById] AS [CreatedById0], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted] AS [IsDeleted0], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById] AS [ModifiedById0], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt] AS [UpdatedAt0]
    FROM [CartItems] AS [c0]
    INNER JOIN (
        SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)
    ) AS [p0] ON [c0].[ProductId] = [p0].[ProductID]
    WHERE [c0].[IsDeleted] = CAST(0 AS bit)
) AS [s] ON [c1].[CartID] = [s].[CartId]
ORDER BY [c1].[CartID], [s].[CartItemID] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"ae3cdff9-625f-48ef-8f4e-7400610f7425","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:0000000F","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":17,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:15.265 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@filter_IsNew_Value='True', @p='0', @p2='12'], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[ProductID], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt], [p0].[CreatedById], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt], [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM (
    SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
    FROM [Products] AS [p]
    WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsAvailable] = @filter_IsNew_Value
    ORDER BY [p].[Name]
    OFFSET @p ROWS FETCH NEXT @p2 ROWS ONLY
) AS [p0]
INNER JOIN [Categories] AS [c] ON [p0].[CategoryId] = [c].[CategoryID]
ORDER BY [p0].[Name] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"e4696aa6-44f7-4b53-ad52-b1a28ecd9b89","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000009","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:15.401 +01:00 [ERR] Error setting cache key: products:featured:10 {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"86b15426-60fd-4a84-813a-aeca266e79df","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:0000000B","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":19,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 02:16:15.432 +01:00 [ERR] Error setting cache key: products:all:1:12 {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"e4696aa6-44f7-4b53-ad52-b1a28ecd9b89","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000009","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 02:16:15.458 +01:00 [INF] HTTP GET /api/v1.0/products/featured responded 200 in 3319.4783 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F3578LF5:0000000B","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":19,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:15.462 +01:00 [INF] HTTP GET /api/v1.0/cart responded 200 in 3298.3885 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F3578LF5:0000000F","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":17,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:15.466 +01:00 [INF] HTTP GET /api/v1.0/products responded 200 in 3338.1309 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F3578LF5:00000009","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:30.710 +01:00 [INF] HTTP OPTIONS /api/v1.0/cart responded 204 in 0.0779 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F3578LF5:00000011","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:30.717 +01:00 [INF] HTTP OPTIONS /api/v1.0/products responded 204 in 0.0820 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F3578LF5:00000013","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":23,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:30.717 +01:00 [INF] HTTP OPTIONS /api/v1.0/categories responded 204 in 0.0354 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F3578LF5:00000017","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:30.717 +01:00 [INF] HTTP OPTIONS /api/v1.0/products/featured responded 204 in 0.0764 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F3578LF5:00000015","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:30.734 +01:00 [INF] Getting cart for user: null or session: e476a691-25fd-4691-9d90-fbcb4b3df7e1 {"SourceContext":"AudioStore.Api.Controllers.CartController","ActionId":"ae3cdff9-625f-48ef-8f4e-7400610f7425","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000019","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":19,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:30.745 +01:00 [INF] Getting products with filter {"SourceContext":"AudioStore.Api.Controllers.ProductsController","ActionId":"e4696aa6-44f7-4b53-ad52-b1a28ecd9b89","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:0000001B","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":23,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:30.754 +01:00 [INF] Getting all categories {"SourceContext":"AudioStore.Api.Controllers.CategoriesController","ActionId":"90b4602e-049d-48d7-bf1a-4391bb5328be","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:0000001D","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:30.764 +01:00 [INF] Getting 10 featured products {"SourceContext":"AudioStore.Api.Controllers.ProductsController","ActionId":"86b15426-60fd-4a84-813a-aeca266e79df","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:0000001F","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:30.773 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@sessionId='e476a691-25fd-4691-9d90-fbcb4b3df7e1' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[CartID], [c1].[CreatedAt], [c1].[CreatedById], [c1].[IsActive], [c1].[IsDeleted], [c1].[ModifiedById], [c1].[SessionId], [c1].[UpdatedAt], [c1].[UserId], [s].[CartItemID], [s].[CartId], [s].[CreatedAt], [s].[CreatedById], [s].[IsDeleted], [s].[ModifiedById], [s].[ProductId], [s].[Quantity], [s].[UnitPrice], [s].[UpdatedAt], [s].[ProductID0], [s].[Brand], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedById0], [s].[Description], [s].[Features], [s].[GalleryImages], [s].[IsAvailable], [s].[IsDeleted0], [s].[IsFeatured], [s].[IsNewProduct], [s].[IsPublished], [s].[MainImage], [s].[ModifiedById0], [s].[Name], [s].[Price], [s].[Slug], [s].[StockQuantity], [s].[UpdatedAt0]
FROM (
    SELECT TOP(1) [c].[CartID], [c].[CreatedAt], [c].[CreatedById], [c].[IsActive], [c].[IsDeleted], [c].[ModifiedById], [c].[SessionId], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[SessionId] = @sessionId AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN (
    SELECT [c0].[CartItemID], [c0].[CartId], [c0].[CreatedAt], [c0].[CreatedById], [c0].[IsDeleted], [c0].[ModifiedById], [c0].[ProductId], [c0].[Quantity], [c0].[UnitPrice], [c0].[UpdatedAt], [p0].[ProductID] AS [ProductID0], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt] AS [CreatedAt0], [p0].[CreatedById] AS [CreatedById0], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted] AS [IsDeleted0], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById] AS [ModifiedById0], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt] AS [UpdatedAt0]
    FROM [CartItems] AS [c0]
    INNER JOIN (
        SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)
    ) AS [p0] ON [c0].[ProductId] = [p0].[ProductID]
    WHERE [c0].[IsDeleted] = CAST(0 AS bit)
) AS [s] ON [c1].[CartID] = [s].[CartId]
ORDER BY [c1].[CartID], [s].[CartItemID] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"ae3cdff9-625f-48ef-8f4e-7400610f7425","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000019","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:30.784 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@filter_IsNew_Value='True'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Products] AS [p]
WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsAvailable] = @filter_IsNew_Value {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"e4696aa6-44f7-4b53-ad52-b1a28ecd9b89","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:0000001B","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":23,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:30.797 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit) {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"90b4602e-049d-48d7-bf1a-4391bb5328be","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:0000001D","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:30.824 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p='10'], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[ProductID], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt], [p0].[CreatedById], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt], [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM (
    SELECT TOP(@p) [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
    FROM [Products] AS [p]
    WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsFeatured] = CAST(1 AS bit) AND [p].[IsAvailable] = CAST(1 AS bit) AND [p].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [p].[CreatedAt] DESC
) AS [p0]
INNER JOIN [Categories] AS [c] ON [p0].[CategoryId] = [c].[CategoryID]
ORDER BY [p0].[CreatedAt] DESC {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"86b15426-60fd-4a84-813a-aeca266e79df","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:0000001F","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":19,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:30.854 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@filter_IsNew_Value='True', @p='0', @p2='12'], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[ProductID], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt], [p0].[CreatedById], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt], [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM (
    SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
    FROM [Products] AS [p]
    WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsAvailable] = @filter_IsNew_Value
    ORDER BY [p].[Name]
    OFFSET @p ROWS FETCH NEXT @p2 ROWS ONLY
) AS [p0]
INNER JOIN [Categories] AS [c] ON [p0].[CategoryId] = [c].[CategoryID]
ORDER BY [p0].[Name] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"e4696aa6-44f7-4b53-ad52-b1a28ecd9b89","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:0000001B","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":17,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:30.839 +01:00 [INF] HTTP GET /api/v1.0/cart responded 200 in 105.1256 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F3578LF5:00000019","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:30.979 +01:00 [ERR] Error setting cache key: products:featured:10 {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"86b15426-60fd-4a84-813a-aeca266e79df","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:0000001F","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":19,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 02:16:30.928 +01:00 [ERR] Error setting cache key: categories:all {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"90b4602e-049d-48d7-bf1a-4391bb5328be","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:0000001D","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 02:16:31.029 +01:00 [ERR] Error setting cache key: products:all:1:12 {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"e4696aa6-44f7-4b53-ad52-b1a28ecd9b89","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:0000001B","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":17,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 02:16:31.060 +01:00 [INF] HTTP GET /api/v1.0/products/featured responded 200 in 296.2095 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F3578LF5:0000001F","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":19,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:31.085 +01:00 [INF] HTTP GET /api/v1.0/categories responded 200 in 331.2595 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F3578LF5:0000001D","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:31.107 +01:00 [INF] HTTP GET /api/v1.0/products responded 200 in 364.3544 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F3578LF5:0000001B","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":17,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:32.727 +01:00 [INF] Getting cart for user: null or session: e476a691-25fd-4691-9d90-fbcb4b3df7e1 {"SourceContext":"AudioStore.Api.Controllers.CartController","ActionId":"ae3cdff9-625f-48ef-8f4e-7400610f7425","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000021","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:32.740 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@sessionId='e476a691-25fd-4691-9d90-fbcb4b3df7e1' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[CartID], [c1].[CreatedAt], [c1].[CreatedById], [c1].[IsActive], [c1].[IsDeleted], [c1].[ModifiedById], [c1].[SessionId], [c1].[UpdatedAt], [c1].[UserId], [s].[CartItemID], [s].[CartId], [s].[CreatedAt], [s].[CreatedById], [s].[IsDeleted], [s].[ModifiedById], [s].[ProductId], [s].[Quantity], [s].[UnitPrice], [s].[UpdatedAt], [s].[ProductID0], [s].[Brand], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedById0], [s].[Description], [s].[Features], [s].[GalleryImages], [s].[IsAvailable], [s].[IsDeleted0], [s].[IsFeatured], [s].[IsNewProduct], [s].[IsPublished], [s].[MainImage], [s].[ModifiedById0], [s].[Name], [s].[Price], [s].[Slug], [s].[StockQuantity], [s].[UpdatedAt0]
FROM (
    SELECT TOP(1) [c].[CartID], [c].[CreatedAt], [c].[CreatedById], [c].[IsActive], [c].[IsDeleted], [c].[ModifiedById], [c].[SessionId], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[SessionId] = @sessionId AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN (
    SELECT [c0].[CartItemID], [c0].[CartId], [c0].[CreatedAt], [c0].[CreatedById], [c0].[IsDeleted], [c0].[ModifiedById], [c0].[ProductId], [c0].[Quantity], [c0].[UnitPrice], [c0].[UpdatedAt], [p0].[ProductID] AS [ProductID0], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt] AS [CreatedAt0], [p0].[CreatedById] AS [CreatedById0], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted] AS [IsDeleted0], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById] AS [ModifiedById0], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt] AS [UpdatedAt0]
    FROM [CartItems] AS [c0]
    INNER JOIN (
        SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)
    ) AS [p0] ON [c0].[ProductId] = [p0].[ProductID]
    WHERE [c0].[IsDeleted] = CAST(0 AS bit)
) AS [s] ON [c1].[CartID] = [s].[CartId]
ORDER BY [c1].[CartID], [s].[CartItemID] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"ae3cdff9-625f-48ef-8f4e-7400610f7425","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000021","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:32.760 +01:00 [INF] HTTP GET /api/v1.0/cart responded 200 in 35.0550 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F3578LF5:00000021","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:49.649 +01:00 [INF] HTTP OPTIONS /api/v1.0/orders responded 204 in 0.2341 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F3578LF5:00000023","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:49.730 +01:00 [INF] Creating order for user: null {"SourceContext":"AudioStore.Api.Controllers.OrdersController","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000025","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:49.757 +01:00 [INF]  Starting order creation - UserId: null, Items count: 2 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000025","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:49.777 +01:00 [INF]  Items validation passed - 2 items {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000025","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:49.805 +01:00 [INF]  Order DTO Details: {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000025","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:49.849 +01:00 [INF]   - CustomerFirstName: Mohamed {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000025","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:49.886 +01:00 [INF]   - CustomerLastName: Mousa {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000025","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:49.933 +01:00 [INF]   - CustomerEmail: mohamedellithy765@gmail.com {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000025","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:49.983 +01:00 [INF]   - CustomerPhone: +393336863167 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000025","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:49.997 +01:00 [INF]   - ShippingStreet: Localita Vaccarella, Villaggio Don Bosco {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000025","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:50.005 +01:00 [INF]   - ShippingCity: Lucera {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000025","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:50.016 +01:00 [INF]   - ShippingPostalCode: 71036 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000025","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:50.027 +01:00 [INF]   - ShippingCountry: Italy {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000025","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:50.051 +01:00 [INF]  Beginning database transaction {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000025","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:50.067 +01:00 [INF]  Generating order number {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000025","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:16:50.110 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'AudioStore.Infrastructure.Data.AppDbContext'.
System.InvalidOperationException: The configured execution strategy 'SqlServerRetryingExecutionStrategy' does not support user-initiated transactions. Use the execution strategy returned by 'DbContext.Database.CreateExecutionStrategy()' to execute all the operations in the transaction as a retriable unit.
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.OnFirstExecution()
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000025","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: The configured execution strategy 'SqlServerRetryingExecutionStrategy' does not support user-initiated transactions. Use the execution strategy returned by 'DbContext.Database.CreateExecutionStrategy()' to execute all the operations in the transaction as a retriable unit.
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.OnFirstExecution()
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2026-02-09 02:16:50.336 +01:00 [ERR]  CRITICAL ERROR creating order - Exception Type: InvalidOperationException, Message: The configured execution strategy 'SqlServerRetryingExecutionStrategy' does not support user-initiated transactions. Use the execution strategy returned by 'DbContext.Database.CreateExecutionStrategy()' to execute all the operations in the transaction as a retriable unit. {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000025","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: The configured execution strategy 'SqlServerRetryingExecutionStrategy' does not support user-initiated transactions. Use the execution strategy returned by 'DbContext.Database.CreateExecutionStrategy()' to execute all the operations in the transaction as a retriable unit.
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.OnFirstExecution()
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at AudioStore.Application.Services.Implementations.OrderService.GenerateOrderNumberAsync() in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Application\Services\Implementations\OrderService.cs:line 505
   at AudioStore.Application.Services.Implementations.OrderService.CreateOrderAsync(CreateOrderDTO dto) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Application\Services\Implementations\OrderService.cs:line 66
2026-02-09 02:16:50.381 +01:00 [INF] HTTP POST /api/v1.0/orders responded 400 in 709.7363 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F3578LF5:00000025","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:19:44.307 +01:00 [INF] HTTP OPTIONS /api/v1.0/orders responded 204 in 0.1290 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F3578LF5:00000027","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":3,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:19:44.337 +01:00 [INF] Creating order for user: null {"SourceContext":"AudioStore.Api.Controllers.OrdersController","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000029","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:19:44.351 +01:00 [INF]  Starting order creation - UserId: null, Items count: 2 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000029","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:19:44.362 +01:00 [INF]  Items validation passed - 2 items {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000029","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:19:44.371 +01:00 [INF]  Order DTO Details: {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000029","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:19:44.381 +01:00 [INF]   - CustomerFirstName: Mohamed {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000029","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:19:44.393 +01:00 [INF]   - CustomerLastName: Mousa {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000029","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:19:44.402 +01:00 [INF]   - CustomerEmail: mohamedellithy765@gmail.com {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000029","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:19:44.413 +01:00 [INF]   - CustomerPhone: +393336863167 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000029","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:19:44.421 +01:00 [INF]   - ShippingStreet: Localita Vaccarella, Villaggio Don Bosco {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000029","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:19:44.466 +01:00 [INF]   - ShippingCity: Lucera {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000029","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:19:44.484 +01:00 [INF]   - ShippingPostalCode: 71036 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000029","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:19:44.518 +01:00 [INF]   - ShippingCountry: Italy {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000029","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:19:44.531 +01:00 [INF]  Beginning database transaction {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000029","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:19:44.566 +01:00 [INF]  Generating order number {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000029","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:19:44.599 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'AudioStore.Infrastructure.Data.AppDbContext'.
System.InvalidOperationException: The configured execution strategy 'SqlServerRetryingExecutionStrategy' does not support user-initiated transactions. Use the execution strategy returned by 'DbContext.Database.CreateExecutionStrategy()' to execute all the operations in the transaction as a retriable unit.
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.OnFirstExecution()
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000029","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: The configured execution strategy 'SqlServerRetryingExecutionStrategy' does not support user-initiated transactions. Use the execution strategy returned by 'DbContext.Database.CreateExecutionStrategy()' to execute all the operations in the transaction as a retriable unit.
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.OnFirstExecution()
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2026-02-09 02:19:44.746 +01:00 [ERR]  CRITICAL ERROR creating order - Exception Type: InvalidOperationException, Message: The configured execution strategy 'SqlServerRetryingExecutionStrategy' does not support user-initiated transactions. Use the execution strategy returned by 'DbContext.Database.CreateExecutionStrategy()' to execute all the operations in the transaction as a retriable unit. {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"55344eff-9e90-4d3e-b789-af02c40c8b03","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F3578LF5:00000029","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: The configured execution strategy 'SqlServerRetryingExecutionStrategy' does not support user-initiated transactions. Use the execution strategy returned by 'DbContext.Database.CreateExecutionStrategy()' to execute all the operations in the transaction as a retriable unit.
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.OnFirstExecution()
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at AudioStore.Application.Services.Implementations.OrderService.GenerateOrderNumberAsync() in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Application\Services\Implementations\OrderService.cs:line 505
   at AudioStore.Application.Services.Implementations.OrderService.CreateOrderAsync(CreateOrderDTO dto) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Application\Services\Implementations\OrderService.cs:line 66
2026-02-09 02:19:44.762 +01:00 [INF] HTTP POST /api/v1.0/orders responded 400 in 425.5752 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F3578LF5:00000029","ConnectionId":"0HNJ7F3578LF5","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:03.545 +01:00 [INF] Starting AudioStore API {"MachineName":"MOHAMEDMOUSA","ThreadId":2,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:04.533 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development. {"EventId":{"Id":10400,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.SensitiveDataLoggingEnabledWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"MOHAMEDMOUSA","ThreadId":2,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:04.956 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:04.990 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:05.035 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:05.049 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:05.054 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:05.068 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:05.082 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:05.089 +01:00 [INF] Starting database seeding... {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:05.287 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[@normalizedName='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[CreatedAt], [r].[Description], [r].[IsSystemRole], [r].[Name], [r].[NormalizedName], [r].[UpdatedAt]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @normalizedName {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:05.332 +01:00 [INF] Role 'Administrator' already exists {"SourceContext":"AudioStore.Infrastructure.Identity.RoleSeeder","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:05.338 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@normalizedName='CUSTOMER' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[CreatedAt], [r].[Description], [r].[IsSystemRole], [r].[Name], [r].[NormalizedName], [r].[UpdatedAt]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @normalizedName {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:05.343 +01:00 [INF] Role 'Customer' already exists {"SourceContext":"AudioStore.Infrastructure.Identity.RoleSeeder","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:05.365 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@normalizedEmail='ADMIN@AUDIOSTORE.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[CreatedById], [u].[Email], [u].[EmailConfirmed], [u].[FirstName], [u].[IsActive], [u].[IsDeleted], [u].[LastName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[ModifiedById], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RegistrationDate], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @normalizedEmail {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:05.399 +01:00 [INF] Admin user already exists: admin@audiostore.com {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:05.422 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:05.428 +01:00 [INF] Categories already exist, skipping seed {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:05.445 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:05.450 +01:00 [INF] Products already exist, skipping seed {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:05.453 +01:00 [INF] Database seeding completed successfully! {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:05.837 +01:00 [WRN] The ASP.NET Core developer certificate is not trusted. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert {"EventId":{"Id":8,"Name":"DeveloperCertificateNotTrusted"},"SourceContext":"Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:15.745 +01:00 [INF] HTTP OPTIONS /api/v1.0/categories responded 204 in 7.0704 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F5DT3VRU:00000007","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:15.745 +01:00 [INF] HTTP OPTIONS /api/v1.0/products responded 204 in 6.7776 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F5DT3VRU:00000003","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:15.745 +01:00 [INF] HTTP OPTIONS /api/v1.0/cart responded 204 in 6.8606 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F5DT3VRU:00000001","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:15.745 +01:00 [INF] HTTP OPTIONS /api/v1.0/products/featured responded 204 in 6.8250 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F5DT3VRU:00000005","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:15.967 +01:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license. {"SourceContext":"LuckyPennySoftware.AutoMapper.License","ActionId":"ab394061-9640-4c3e-8300-a512889f006e","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:0000000D","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:16.022 +01:00 [INF] Getting all categories {"SourceContext":"AudioStore.Api.Controllers.CategoriesController","ActionId":"2d0e9757-f39a-43ae-8c4f-fe67dcacdc35","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:00000009","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":14,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:16.023 +01:00 [INF] Getting cart for user: null or session: e476a691-25fd-4691-9d90-fbcb4b3df7e1 {"SourceContext":"AudioStore.Api.Controllers.CartController","ActionId":"ab394061-9640-4c3e-8300-a512889f006e","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:0000000D","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:16.047 +01:00 [INF] Getting 10 featured products {"SourceContext":"AudioStore.Api.Controllers.ProductsController","ActionId":"dcca05d1-de4d-49a5-9b24-b57ac0e544ae","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:0000000F","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":17,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:16.061 +01:00 [INF] Getting products with filter {"SourceContext":"AudioStore.Api.Controllers.ProductsController","ActionId":"c4e742de-0c1f-4676-86e8-20939cdfd4ab","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:0000000B","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":18,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:16.103 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit) {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"2d0e9757-f39a-43ae-8c4f-fe67dcacdc35","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:00000009","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":16,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:16.224 +01:00 [ERR] Error setting cache key: categories:all {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"2d0e9757-f39a-43ae-8c4f-fe67dcacdc35","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:00000009","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":16,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 02:20:16.269 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@filter_IsNew_Value='True'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Products] AS [p]
WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsAvailable] = @filter_IsNew_Value {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"c4e742de-0c1f-4676-86e8-20939cdfd4ab","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:0000000B","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":14,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:16.294 +01:00 [INF] HTTP GET /api/v1.0/categories responded 200 in 520.1823 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F5DT3VRU:00000009","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":16,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:16.295 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p='10'], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[ProductID], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt], [p0].[CreatedById], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt], [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM (
    SELECT TOP(@p) [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
    FROM [Products] AS [p]
    WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsFeatured] = CAST(1 AS bit) AND [p].[IsAvailable] = CAST(1 AS bit) AND [p].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [p].[CreatedAt] DESC
) AS [p0]
INNER JOIN [Categories] AS [c] ON [p0].[CategoryId] = [c].[CategoryID]
ORDER BY [p0].[CreatedAt] DESC {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"dcca05d1-de4d-49a5-9b24-b57ac0e544ae","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:0000000F","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":17,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:16.328 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[@sessionId='e476a691-25fd-4691-9d90-fbcb4b3df7e1' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[CartID], [c1].[CreatedAt], [c1].[CreatedById], [c1].[IsActive], [c1].[IsDeleted], [c1].[ModifiedById], [c1].[SessionId], [c1].[UpdatedAt], [c1].[UserId], [s].[CartItemID], [s].[CartId], [s].[CreatedAt], [s].[CreatedById], [s].[IsDeleted], [s].[ModifiedById], [s].[ProductId], [s].[Quantity], [s].[UnitPrice], [s].[UpdatedAt], [s].[ProductID0], [s].[Brand], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedById0], [s].[Description], [s].[Features], [s].[GalleryImages], [s].[IsAvailable], [s].[IsDeleted0], [s].[IsFeatured], [s].[IsNewProduct], [s].[IsPublished], [s].[MainImage], [s].[ModifiedById0], [s].[Name], [s].[Price], [s].[Slug], [s].[StockQuantity], [s].[UpdatedAt0]
FROM (
    SELECT TOP(1) [c].[CartID], [c].[CreatedAt], [c].[CreatedById], [c].[IsActive], [c].[IsDeleted], [c].[ModifiedById], [c].[SessionId], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[SessionId] = @sessionId AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN (
    SELECT [c0].[CartItemID], [c0].[CartId], [c0].[CreatedAt], [c0].[CreatedById], [c0].[IsDeleted], [c0].[ModifiedById], [c0].[ProductId], [c0].[Quantity], [c0].[UnitPrice], [c0].[UpdatedAt], [p0].[ProductID] AS [ProductID0], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt] AS [CreatedAt0], [p0].[CreatedById] AS [CreatedById0], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted] AS [IsDeleted0], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById] AS [ModifiedById0], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt] AS [UpdatedAt0]
    FROM [CartItems] AS [c0]
    INNER JOIN (
        SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)
    ) AS [p0] ON [c0].[ProductId] = [p0].[ProductID]
    WHERE [c0].[IsDeleted] = CAST(0 AS bit)
) AS [s] ON [c1].[CartID] = [s].[CartId]
ORDER BY [c1].[CartID], [s].[CartItemID] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"ab394061-9640-4c3e-8300-a512889f006e","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:0000000D","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:16.337 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@filter_IsNew_Value='True', @p='0', @p2='12'], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[ProductID], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt], [p0].[CreatedById], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt], [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM (
    SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
    FROM [Products] AS [p]
    WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsAvailable] = @filter_IsNew_Value
    ORDER BY [p].[Name]
    OFFSET @p ROWS FETCH NEXT @p2 ROWS ONLY
) AS [p0]
INNER JOIN [Categories] AS [c] ON [p0].[CategoryId] = [c].[CategoryID]
ORDER BY [p0].[Name] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"c4e742de-0c1f-4676-86e8-20939cdfd4ab","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:0000000B","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:16.434 +01:00 [ERR] Error setting cache key: products:featured:10 {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"dcca05d1-de4d-49a5-9b24-b57ac0e544ae","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:0000000F","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":17,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 02:20:16.507 +01:00 [ERR] Error setting cache key: products:all:1:12 {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"c4e742de-0c1f-4676-86e8-20939cdfd4ab","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:0000000B","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 02:20:16.531 +01:00 [INF] HTTP GET /api/v1.0/products/featured responded 200 in 711.2604 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F5DT3VRU:0000000F","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":17,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:16.533 +01:00 [INF] HTTP GET /api/v1.0/products responded 200 in 755.8265 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F5DT3VRU:0000000B","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:16.539 +01:00 [INF] HTTP GET /api/v1.0/cart responded 200 in 752.3994 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F5DT3VRU:0000000D","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:18.220 +01:00 [INF] Getting cart for user: null or session: e476a691-25fd-4691-9d90-fbcb4b3df7e1 {"SourceContext":"AudioStore.Api.Controllers.CartController","ActionId":"ab394061-9640-4c3e-8300-a512889f006e","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:00000011","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:18.243 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@sessionId='e476a691-25fd-4691-9d90-fbcb4b3df7e1' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[CartID], [c1].[CreatedAt], [c1].[CreatedById], [c1].[IsActive], [c1].[IsDeleted], [c1].[ModifiedById], [c1].[SessionId], [c1].[UpdatedAt], [c1].[UserId], [s].[CartItemID], [s].[CartId], [s].[CreatedAt], [s].[CreatedById], [s].[IsDeleted], [s].[ModifiedById], [s].[ProductId], [s].[Quantity], [s].[UnitPrice], [s].[UpdatedAt], [s].[ProductID0], [s].[Brand], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedById0], [s].[Description], [s].[Features], [s].[GalleryImages], [s].[IsAvailable], [s].[IsDeleted0], [s].[IsFeatured], [s].[IsNewProduct], [s].[IsPublished], [s].[MainImage], [s].[ModifiedById0], [s].[Name], [s].[Price], [s].[Slug], [s].[StockQuantity], [s].[UpdatedAt0]
FROM (
    SELECT TOP(1) [c].[CartID], [c].[CreatedAt], [c].[CreatedById], [c].[IsActive], [c].[IsDeleted], [c].[ModifiedById], [c].[SessionId], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[SessionId] = @sessionId AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN (
    SELECT [c0].[CartItemID], [c0].[CartId], [c0].[CreatedAt], [c0].[CreatedById], [c0].[IsDeleted], [c0].[ModifiedById], [c0].[ProductId], [c0].[Quantity], [c0].[UnitPrice], [c0].[UpdatedAt], [p0].[ProductID] AS [ProductID0], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt] AS [CreatedAt0], [p0].[CreatedById] AS [CreatedById0], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted] AS [IsDeleted0], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById] AS [ModifiedById0], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt] AS [UpdatedAt0]
    FROM [CartItems] AS [c0]
    INNER JOIN (
        SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)
    ) AS [p0] ON [c0].[ProductId] = [p0].[ProductID]
    WHERE [c0].[IsDeleted] = CAST(0 AS bit)
) AS [s] ON [c1].[CartID] = [s].[CartId]
ORDER BY [c1].[CartID], [s].[CartItemID] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"ab394061-9640-4c3e-8300-a512889f006e","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:00000011","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:18.286 +01:00 [INF] HTTP GET /api/v1.0/cart responded 200 in 68.8579 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F5DT3VRU:00000011","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:23.362 +01:00 [INF] HTTP OPTIONS /api/v1.0/orders responded 204 in 0.2098 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F5DT3VRU:00000013","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:23.448 +01:00 [INF] Creating order for user: null {"SourceContext":"AudioStore.Api.Controllers.OrdersController","ActionId":"51935d93-0a3d-4bc7-8785-4e95a401a4bf","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:23.462 +01:00 [INF]  Starting order creation - UserId: null, Items count: 2 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"51935d93-0a3d-4bc7-8785-4e95a401a4bf","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:23.472 +01:00 [INF]  Items validation passed - 2 items {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"51935d93-0a3d-4bc7-8785-4e95a401a4bf","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:23.479 +01:00 [INF]  Order DTO Details: {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"51935d93-0a3d-4bc7-8785-4e95a401a4bf","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:23.490 +01:00 [INF]   - CustomerFirstName: Mohamed {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"51935d93-0a3d-4bc7-8785-4e95a401a4bf","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:23.496 +01:00 [INF]   - CustomerLastName: Mousa {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"51935d93-0a3d-4bc7-8785-4e95a401a4bf","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:23.506 +01:00 [INF]   - CustomerEmail: mohamedellithy765@gmail.com {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"51935d93-0a3d-4bc7-8785-4e95a401a4bf","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:23.512 +01:00 [INF]   - CustomerPhone: +393336863167 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"51935d93-0a3d-4bc7-8785-4e95a401a4bf","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:23.523 +01:00 [INF]   - ShippingStreet: Localita Vaccarella, Villaggio Don Bosco {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"51935d93-0a3d-4bc7-8785-4e95a401a4bf","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:23.534 +01:00 [INF]   - ShippingCity: Lucera {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"51935d93-0a3d-4bc7-8785-4e95a401a4bf","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:23.546 +01:00 [INF]   - ShippingPostalCode: 71036 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"51935d93-0a3d-4bc7-8785-4e95a401a4bf","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:23.556 +01:00 [INF]   - ShippingCountry: Italy {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"51935d93-0a3d-4bc7-8785-4e95a401a4bf","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:23.571 +01:00 [INF]  Beginning database transaction {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"51935d93-0a3d-4bc7-8785-4e95a401a4bf","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:23.604 +01:00 [INF]  Generating order number {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"51935d93-0a3d-4bc7-8785-4e95a401a4bf","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:20:23.695 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'AudioStore.Infrastructure.Data.AppDbContext'.
System.InvalidOperationException: The configured execution strategy 'SqlServerRetryingExecutionStrategy' does not support user-initiated transactions. Use the execution strategy returned by 'DbContext.Database.CreateExecutionStrategy()' to execute all the operations in the transaction as a retriable unit.
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.OnFirstExecution()
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"51935d93-0a3d-4bc7-8785-4e95a401a4bf","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: The configured execution strategy 'SqlServerRetryingExecutionStrategy' does not support user-initiated transactions. Use the execution strategy returned by 'DbContext.Database.CreateExecutionStrategy()' to execute all the operations in the transaction as a retriable unit.
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.OnFirstExecution()
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2026-02-09 02:20:23.965 +01:00 [ERR]  CRITICAL ERROR creating order - Exception Type: InvalidOperationException, Message: The configured execution strategy 'SqlServerRetryingExecutionStrategy' does not support user-initiated transactions. Use the execution strategy returned by 'DbContext.Database.CreateExecutionStrategy()' to execute all the operations in the transaction as a retriable unit. {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"51935d93-0a3d-4bc7-8785-4e95a401a4bf","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F5DT3VRU:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: The configured execution strategy 'SqlServerRetryingExecutionStrategy' does not support user-initiated transactions. Use the execution strategy returned by 'DbContext.Database.CreateExecutionStrategy()' to execute all the operations in the transaction as a retriable unit.
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.OnFirstExecution()
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at AudioStore.Application.Services.Implementations.OrderService.GenerateOrderNumberAsync() in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Application\Services\Implementations\OrderService.cs:line 505
   at AudioStore.Application.Services.Implementations.OrderService.CreateOrderAsync(CreateOrderDTO dto) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Application\Services\Implementations\OrderService.cs:line 66
2026-02-09 02:20:24.005 +01:00 [INF] HTTP POST /api/v1.0/orders responded 400 in 618.4550 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F5DT3VRU:00000015","ConnectionId":"0HNJ7F5DT3VRU","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:43.314 +01:00 [INF] Starting AudioStore API {"MachineName":"MOHAMEDMOUSA","ThreadId":2,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:44.270 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development. {"EventId":{"Id":10400,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.SensitiveDataLoggingEnabledWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"MOHAMEDMOUSA","ThreadId":2,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:44.622 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:44.653 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:44.706 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:44.723 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:44.730 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:44.742 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:44.758 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:44.767 +01:00 [INF] Starting database seeding... {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:44.960 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@normalizedName='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[CreatedAt], [r].[Description], [r].[IsSystemRole], [r].[Name], [r].[NormalizedName], [r].[UpdatedAt]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @normalizedName {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:45.002 +01:00 [INF] Role 'Administrator' already exists {"SourceContext":"AudioStore.Infrastructure.Identity.RoleSeeder","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:45.007 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@normalizedName='CUSTOMER' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[CreatedAt], [r].[Description], [r].[IsSystemRole], [r].[Name], [r].[NormalizedName], [r].[UpdatedAt]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @normalizedName {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":15,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:45.013 +01:00 [INF] Role 'Customer' already exists {"SourceContext":"AudioStore.Infrastructure.Identity.RoleSeeder","MachineName":"MOHAMEDMOUSA","ThreadId":15,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:45.032 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@normalizedEmail='ADMIN@AUDIOSTORE.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[CreatedById], [u].[Email], [u].[EmailConfirmed], [u].[FirstName], [u].[IsActive], [u].[IsDeleted], [u].[LastName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[ModifiedById], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RegistrationDate], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @normalizedEmail {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:45.062 +01:00 [INF] Admin user already exists: admin@audiostore.com {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:45.081 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:45.086 +01:00 [INF] Categories already exist, skipping seed {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:45.100 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":15,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:45.105 +01:00 [INF] Products already exist, skipping seed {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":15,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:45.107 +01:00 [INF] Database seeding completed successfully! {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":15,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:45.292 +01:00 [WRN] The ASP.NET Core developer certificate is not trusted. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert {"EventId":{"Id":8,"Name":"DeveloperCertificateNotTrusted"},"SourceContext":"Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer","MachineName":"MOHAMEDMOUSA","ThreadId":15,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:59.204 +01:00 [INF] HTTP OPTIONS /api/v1.0/products/featured responded 204 in 3.4266 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F6BEP01T:00000003","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":17,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:59.204 +01:00 [INF] HTTP OPTIONS /api/v1.0/cart responded 204 in 3.4456 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F6BEP01T:00000001","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:59.204 +01:00 [INF] HTTP OPTIONS /api/v1.0/products responded 204 in 3.4120 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F6BEP01T:00000005","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":19,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:59.204 +01:00 [INF] HTTP OPTIONS /api/v1.0/categories responded 204 in 3.4347 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F6BEP01T:00000007","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:59.517 +01:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license. {"SourceContext":"LuckyPennySoftware.AutoMapper.License","ActionId":"edba6e57-93a0-4de9-ade0-bc21959c3136","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:0000000B","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:59.556 +01:00 [INF] Getting all categories {"SourceContext":"AudioStore.Api.Controllers.CategoriesController","ActionId":"f2204cdd-d0fb-4d9d-8a7b-73bea421ad6b","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:0000000F","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:59.558 +01:00 [INF] Getting cart for user: null or session: e476a691-25fd-4691-9d90-fbcb4b3df7e1 {"SourceContext":"AudioStore.Api.Controllers.CartController","ActionId":"edba6e57-93a0-4de9-ade0-bc21959c3136","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:0000000B","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:59.565 +01:00 [INF] Getting 10 featured products {"SourceContext":"AudioStore.Api.Controllers.ProductsController","ActionId":"2c04cdf2-e3b8-4fec-be1c-fc1651f4b994","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:00000009","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":16,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:59.573 +01:00 [INF] Getting products with filter {"SourceContext":"AudioStore.Api.Controllers.ProductsController","ActionId":"70a7377e-de57-4011-a0b1-5586488412b9","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:0000000D","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":19,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:59.622 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit) {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"f2204cdd-d0fb-4d9d-8a7b-73bea421ad6b","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:0000000F","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":23,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:59.761 +01:00 [ERR] Error setting cache key: categories:all {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"f2204cdd-d0fb-4d9d-8a7b-73bea421ad6b","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:0000000F","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":23,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 02:21:59.816 +01:00 [INF] HTTP GET /api/v1.0/categories responded 200 in 491.5110 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F6BEP01T:0000000F","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":23,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:59.823 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@filter_IsNew_Value='True'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Products] AS [p]
WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsAvailable] = @filter_IsNew_Value {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"70a7377e-de57-4011-a0b1-5586488412b9","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:0000000D","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:59.880 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p='10'], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[ProductID], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt], [p0].[CreatedById], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt], [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM (
    SELECT TOP(@p) [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
    FROM [Products] AS [p]
    WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsFeatured] = CAST(1 AS bit) AND [p].[IsAvailable] = CAST(1 AS bit) AND [p].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [p].[CreatedAt] DESC
) AS [p0]
INNER JOIN [Categories] AS [c] ON [p0].[CategoryId] = [c].[CategoryID]
ORDER BY [p0].[CreatedAt] DESC {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"2c04cdf2-e3b8-4fec-be1c-fc1651f4b994","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:00000009","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":23,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:59.906 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@sessionId='e476a691-25fd-4691-9d90-fbcb4b3df7e1' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[CartID], [c1].[CreatedAt], [c1].[CreatedById], [c1].[IsActive], [c1].[IsDeleted], [c1].[ModifiedById], [c1].[SessionId], [c1].[UpdatedAt], [c1].[UserId], [s].[CartItemID], [s].[CartId], [s].[CreatedAt], [s].[CreatedById], [s].[IsDeleted], [s].[ModifiedById], [s].[ProductId], [s].[Quantity], [s].[UnitPrice], [s].[UpdatedAt], [s].[ProductID0], [s].[Brand], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedById0], [s].[Description], [s].[Features], [s].[GalleryImages], [s].[IsAvailable], [s].[IsDeleted0], [s].[IsFeatured], [s].[IsNewProduct], [s].[IsPublished], [s].[MainImage], [s].[ModifiedById0], [s].[Name], [s].[Price], [s].[Slug], [s].[StockQuantity], [s].[UpdatedAt0]
FROM (
    SELECT TOP(1) [c].[CartID], [c].[CreatedAt], [c].[CreatedById], [c].[IsActive], [c].[IsDeleted], [c].[ModifiedById], [c].[SessionId], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[SessionId] = @sessionId AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN (
    SELECT [c0].[CartItemID], [c0].[CartId], [c0].[CreatedAt], [c0].[CreatedById], [c0].[IsDeleted], [c0].[ModifiedById], [c0].[ProductId], [c0].[Quantity], [c0].[UnitPrice], [c0].[UpdatedAt], [p0].[ProductID] AS [ProductID0], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt] AS [CreatedAt0], [p0].[CreatedById] AS [CreatedById0], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted] AS [IsDeleted0], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById] AS [ModifiedById0], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt] AS [UpdatedAt0]
    FROM [CartItems] AS [c0]
    INNER JOIN (
        SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)
    ) AS [p0] ON [c0].[ProductId] = [p0].[ProductID]
    WHERE [c0].[IsDeleted] = CAST(0 AS bit)
) AS [s] ON [c1].[CartID] = [s].[CartId]
ORDER BY [c1].[CartID], [s].[CartItemID] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"edba6e57-93a0-4de9-ade0-bc21959c3136","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:0000000B","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:21:59.922 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@filter_IsNew_Value='True', @p='0', @p2='12'], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[ProductID], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt], [p0].[CreatedById], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt], [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM (
    SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
    FROM [Products] AS [p]
    WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsAvailable] = @filter_IsNew_Value
    ORDER BY [p].[Name]
    OFFSET @p ROWS FETCH NEXT @p2 ROWS ONLY
) AS [p0]
INNER JOIN [Categories] AS [c] ON [p0].[CategoryId] = [c].[CategoryID]
ORDER BY [p0].[Name] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"70a7377e-de57-4011-a0b1-5586488412b9","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:0000000D","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:00.004 +01:00 [ERR] Error setting cache key: products:featured:10 {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"2c04cdf2-e3b8-4fec-be1c-fc1651f4b994","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:00000009","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":23,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 02:22:00.097 +01:00 [ERR] Error setting cache key: products:all:1:12 {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"70a7377e-de57-4011-a0b1-5586488412b9","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:0000000D","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 02:22:00.120 +01:00 [INF] HTTP GET /api/v1.0/products/featured responded 200 in 892.4867 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F6BEP01T:00000009","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":23,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:00.127 +01:00 [INF] HTTP GET /api/v1.0/products responded 200 in 843.2976 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F6BEP01T:0000000D","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:00.131 +01:00 [INF] HTTP GET /api/v1.0/cart responded 200 in 898.9985 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F6BEP01T:0000000B","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:01.747 +01:00 [INF] Getting cart for user: null or session: e476a691-25fd-4691-9d90-fbcb4b3df7e1 {"SourceContext":"AudioStore.Api.Controllers.CartController","ActionId":"edba6e57-93a0-4de9-ade0-bc21959c3136","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:00000011","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:01.773 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@sessionId='e476a691-25fd-4691-9d90-fbcb4b3df7e1' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[CartID], [c1].[CreatedAt], [c1].[CreatedById], [c1].[IsActive], [c1].[IsDeleted], [c1].[ModifiedById], [c1].[SessionId], [c1].[UpdatedAt], [c1].[UserId], [s].[CartItemID], [s].[CartId], [s].[CreatedAt], [s].[CreatedById], [s].[IsDeleted], [s].[ModifiedById], [s].[ProductId], [s].[Quantity], [s].[UnitPrice], [s].[UpdatedAt], [s].[ProductID0], [s].[Brand], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedById0], [s].[Description], [s].[Features], [s].[GalleryImages], [s].[IsAvailable], [s].[IsDeleted0], [s].[IsFeatured], [s].[IsNewProduct], [s].[IsPublished], [s].[MainImage], [s].[ModifiedById0], [s].[Name], [s].[Price], [s].[Slug], [s].[StockQuantity], [s].[UpdatedAt0]
FROM (
    SELECT TOP(1) [c].[CartID], [c].[CreatedAt], [c].[CreatedById], [c].[IsActive], [c].[IsDeleted], [c].[ModifiedById], [c].[SessionId], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[SessionId] = @sessionId AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN (
    SELECT [c0].[CartItemID], [c0].[CartId], [c0].[CreatedAt], [c0].[CreatedById], [c0].[IsDeleted], [c0].[ModifiedById], [c0].[ProductId], [c0].[Quantity], [c0].[UnitPrice], [c0].[UpdatedAt], [p0].[ProductID] AS [ProductID0], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt] AS [CreatedAt0], [p0].[CreatedById] AS [CreatedById0], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted] AS [IsDeleted0], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById] AS [ModifiedById0], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt] AS [UpdatedAt0]
    FROM [CartItems] AS [c0]
    INNER JOIN (
        SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)
    ) AS [p0] ON [c0].[ProductId] = [p0].[ProductID]
    WHERE [c0].[IsDeleted] = CAST(0 AS bit)
) AS [s] ON [c1].[CartID] = [s].[CartId]
ORDER BY [c1].[CartID], [s].[CartItemID] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"edba6e57-93a0-4de9-ade0-bc21959c3136","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:00000011","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:01.801 +01:00 [INF] HTTP GET /api/v1.0/cart responded 200 in 56.6449 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F6BEP01T:00000011","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:05.133 +01:00 [INF] HTTP OPTIONS /api/v1.0/orders responded 204 in 0.1043 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F6BEP01T:00000013","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":23,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:05.212 +01:00 [INF] Creating order for user: null {"SourceContext":"AudioStore.Api.Controllers.OrdersController","ActionId":"d26ab926-9cb9-4dcd-a8ec-3df158a68a1e","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:05.235 +01:00 [INF]  Starting order creation - UserId: null, Items count: 2 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"d26ab926-9cb9-4dcd-a8ec-3df158a68a1e","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:05.253 +01:00 [INF]  Items validation passed - 2 items {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"d26ab926-9cb9-4dcd-a8ec-3df158a68a1e","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:05.269 +01:00 [INF]  Order DTO Details: {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"d26ab926-9cb9-4dcd-a8ec-3df158a68a1e","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:05.283 +01:00 [INF]   - CustomerFirstName: Mohamed {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"d26ab926-9cb9-4dcd-a8ec-3df158a68a1e","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:05.303 +01:00 [INF]   - CustomerLastName: Mousa {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"d26ab926-9cb9-4dcd-a8ec-3df158a68a1e","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:05.322 +01:00 [INF]   - CustomerEmail: mohamedellithy765@gmail.com {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"d26ab926-9cb9-4dcd-a8ec-3df158a68a1e","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:05.342 +01:00 [INF]   - CustomerPhone: +393336863167 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"d26ab926-9cb9-4dcd-a8ec-3df158a68a1e","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:05.361 +01:00 [INF]   - ShippingStreet: Localita Vaccarella, Villaggio Don Bosco {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"d26ab926-9cb9-4dcd-a8ec-3df158a68a1e","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:05.393 +01:00 [INF]   - ShippingCity: Lucera {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"d26ab926-9cb9-4dcd-a8ec-3df158a68a1e","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:05.410 +01:00 [INF]   - ShippingPostalCode: 71036 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"d26ab926-9cb9-4dcd-a8ec-3df158a68a1e","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:05.419 +01:00 [INF]   - ShippingCountry: Italy {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"d26ab926-9cb9-4dcd-a8ec-3df158a68a1e","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:05.434 +01:00 [INF]  Beginning database transaction {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"d26ab926-9cb9-4dcd-a8ec-3df158a68a1e","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:05.451 +01:00 [INF]  Generating order number {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"d26ab926-9cb9-4dcd-a8ec-3df158a68a1e","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:05.495 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'AudioStore.Infrastructure.Data.AppDbContext'.
System.InvalidOperationException: The configured execution strategy 'SqlServerRetryingExecutionStrategy' does not support user-initiated transactions. Use the execution strategy returned by 'DbContext.Database.CreateExecutionStrategy()' to execute all the operations in the transaction as a retriable unit.
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.OnFirstExecution()
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"d26ab926-9cb9-4dcd-a8ec-3df158a68a1e","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: The configured execution strategy 'SqlServerRetryingExecutionStrategy' does not support user-initiated transactions. Use the execution strategy returned by 'DbContext.Database.CreateExecutionStrategy()' to execute all the operations in the transaction as a retriable unit.
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.OnFirstExecution()
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2026-02-09 02:22:05.672 +01:00 [ERR]  CRITICAL ERROR creating order - Exception Type: InvalidOperationException, Message: The configured execution strategy 'SqlServerRetryingExecutionStrategy' does not support user-initiated transactions. Use the execution strategy returned by 'DbContext.Database.CreateExecutionStrategy()' to execute all the operations in the transaction as a retriable unit. {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"d26ab926-9cb9-4dcd-a8ec-3df158a68a1e","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7F6BEP01T:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: The configured execution strategy 'SqlServerRetryingExecutionStrategy' does not support user-initiated transactions. Use the execution strategy returned by 'DbContext.Database.CreateExecutionStrategy()' to execute all the operations in the transaction as a retriable unit.
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.OnFirstExecution()
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at AudioStore.Application.Services.Implementations.OrderService.GenerateOrderNumberAsync() in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Application\Services\Implementations\OrderService.cs:line 505
   at AudioStore.Application.Services.Implementations.OrderService.CreateOrderAsync(CreateOrderDTO dto) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Application\Services\Implementations\OrderService.cs:line 66
2026-02-09 02:22:05.691 +01:00 [INF] HTTP POST /api/v1.0/orders responded 400 in 543.1747 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F6BEP01T:00000015","ConnectionId":"0HNJ7F6BEP01T","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:34.075 +01:00 [INF] Starting AudioStore API {"MachineName":"MOHAMEDMOUSA","ThreadId":2,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:35.122 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development. {"EventId":{"Id":10400,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.SensitiveDataLoggingEnabledWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"MOHAMEDMOUSA","ThreadId":2,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:35.578 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:35.611 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:35.655 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:35.670 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:35.675 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:35.688 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:35.700 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:35.707 +01:00 [INF] Starting database seeding... {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:35.896 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[@normalizedName='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[CreatedAt], [r].[Description], [r].[IsSystemRole], [r].[Name], [r].[NormalizedName], [r].[UpdatedAt]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @normalizedName {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:35.941 +01:00 [INF] Role 'Administrator' already exists {"SourceContext":"AudioStore.Infrastructure.Identity.RoleSeeder","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:35.946 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@normalizedName='CUSTOMER' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[CreatedAt], [r].[Description], [r].[IsSystemRole], [r].[Name], [r].[NormalizedName], [r].[UpdatedAt]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @normalizedName {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:35.950 +01:00 [INF] Role 'Customer' already exists {"SourceContext":"AudioStore.Infrastructure.Identity.RoleSeeder","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:35.972 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@normalizedEmail='ADMIN@AUDIOSTORE.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[CreatedById], [u].[Email], [u].[EmailConfirmed], [u].[FirstName], [u].[IsActive], [u].[IsDeleted], [u].[LastName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[ModifiedById], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RegistrationDate], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @normalizedEmail {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:36.003 +01:00 [INF] Admin user already exists: admin@audiostore.com {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:36.023 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:36.028 +01:00 [INF] Categories already exist, skipping seed {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:36.043 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:36.050 +01:00 [INF] Products already exist, skipping seed {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:36.059 +01:00 [INF] Database seeding completed successfully! {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:36.276 +01:00 [WRN] The ASP.NET Core developer certificate is not trusted. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert {"EventId":{"Id":8,"Name":"DeveloperCertificateNotTrusted"},"SourceContext":"Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:45.278 +01:00 [INF] HTTP OPTIONS /api/v1.0/cart responded 204 in 3.7382 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F6QO1493:00000001","ConnectionId":"0HNJ7F6QO1493","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:45.278 +01:00 [INF] HTTP OPTIONS /api/v1.0/products responded 204 in 3.5784 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F6QO1493:00000003","ConnectionId":"0HNJ7F6QO1493","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:45.278 +01:00 [INF] HTTP OPTIONS /api/v1.0/categories responded 204 in 3.6835 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F6QO1493:00000005","ConnectionId":"0HNJ7F6QO1493","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:45.278 +01:00 [INF] HTTP OPTIONS /api/v1.0/products/featured responded 204 in 3.7545 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F6QO1493:00000007","ConnectionId":"0HNJ7F6QO1493","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:45.520 +01:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license. {"SourceContext":"LuckyPennySoftware.AutoMapper.License","ActionId":"af67c772-d9bc-456d-bfa9-c8cb088541d8","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7F6QO1493:00000009","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7F6QO1493","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:45.550 +01:00 [INF] Getting all categories {"SourceContext":"AudioStore.Api.Controllers.CategoriesController","ActionId":"05143fec-688a-41f2-aa77-b4a3b55c920f","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7F6QO1493:0000000D","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7F6QO1493","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:45.551 +01:00 [INF] Getting cart for user: null or session: e476a691-25fd-4691-9d90-fbcb4b3df7e1 {"SourceContext":"AudioStore.Api.Controllers.CartController","ActionId":"af67c772-d9bc-456d-bfa9-c8cb088541d8","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7F6QO1493:00000009","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7F6QO1493","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:45.571 +01:00 [INF] Getting 10 featured products {"SourceContext":"AudioStore.Api.Controllers.ProductsController","ActionId":"c2917ba8-88ae-4c77-a1a5-79978262a6e1","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7F6QO1493:0000000F","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7F6QO1493","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:45.591 +01:00 [INF] Getting products with filter {"SourceContext":"AudioStore.Api.Controllers.ProductsController","ActionId":"f4a40842-8f6c-4c30-98cc-dc2b6ceb5a79","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7F6QO1493:0000000B","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7F6QO1493","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:45.645 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit) {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"05143fec-688a-41f2-aa77-b4a3b55c920f","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7F6QO1493:0000000D","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7F6QO1493","MachineName":"MOHAMEDMOUSA","ThreadId":19,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:45.763 +01:00 [ERR] Error setting cache key: categories:all {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"05143fec-688a-41f2-aa77-b4a3b55c920f","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7F6QO1493:0000000D","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7F6QO1493","MachineName":"MOHAMEDMOUSA","ThreadId":19,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 02:22:45.829 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@filter_IsNew_Value='True'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Products] AS [p]
WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsAvailable] = @filter_IsNew_Value {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"f4a40842-8f6c-4c30-98cc-dc2b6ceb5a79","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7F6QO1493:0000000B","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7F6QO1493","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:45.888 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p='10'], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[ProductID], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt], [p0].[CreatedById], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt], [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM (
    SELECT TOP(@p) [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
    FROM [Products] AS [p]
    WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsFeatured] = CAST(1 AS bit) AND [p].[IsAvailable] = CAST(1 AS bit) AND [p].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [p].[CreatedAt] DESC
) AS [p0]
INNER JOIN [Categories] AS [c] ON [p0].[CategoryId] = [c].[CategoryID]
ORDER BY [p0].[CreatedAt] DESC {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"c2917ba8-88ae-4c77-a1a5-79978262a6e1","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7F6QO1493:0000000F","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7F6QO1493","MachineName":"MOHAMEDMOUSA","ThreadId":18,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:45.896 +01:00 [INF] HTTP GET /api/v1.0/categories responded 200 in 550.7251 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F6QO1493:0000000D","ConnectionId":"0HNJ7F6QO1493","MachineName":"MOHAMEDMOUSA","ThreadId":19,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:45.929 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[@sessionId='e476a691-25fd-4691-9d90-fbcb4b3df7e1' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[CartID], [c1].[CreatedAt], [c1].[CreatedById], [c1].[IsActive], [c1].[IsDeleted], [c1].[ModifiedById], [c1].[SessionId], [c1].[UpdatedAt], [c1].[UserId], [s].[CartItemID], [s].[CartId], [s].[CreatedAt], [s].[CreatedById], [s].[IsDeleted], [s].[ModifiedById], [s].[ProductId], [s].[Quantity], [s].[UnitPrice], [s].[UpdatedAt], [s].[ProductID0], [s].[Brand], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedById0], [s].[Description], [s].[Features], [s].[GalleryImages], [s].[IsAvailable], [s].[IsDeleted0], [s].[IsFeatured], [s].[IsNewProduct], [s].[IsPublished], [s].[MainImage], [s].[ModifiedById0], [s].[Name], [s].[Price], [s].[Slug], [s].[StockQuantity], [s].[UpdatedAt0]
FROM (
    SELECT TOP(1) [c].[CartID], [c].[CreatedAt], [c].[CreatedById], [c].[IsActive], [c].[IsDeleted], [c].[ModifiedById], [c].[SessionId], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[SessionId] = @sessionId AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN (
    SELECT [c0].[CartItemID], [c0].[CartId], [c0].[CreatedAt], [c0].[CreatedById], [c0].[IsDeleted], [c0].[ModifiedById], [c0].[ProductId], [c0].[Quantity], [c0].[UnitPrice], [c0].[UpdatedAt], [p0].[ProductID] AS [ProductID0], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt] AS [CreatedAt0], [p0].[CreatedById] AS [CreatedById0], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted] AS [IsDeleted0], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById] AS [ModifiedById0], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt] AS [UpdatedAt0]
    FROM [CartItems] AS [c0]
    INNER JOIN (
        SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)
    ) AS [p0] ON [c0].[ProductId] = [p0].[ProductID]
    WHERE [c0].[IsDeleted] = CAST(0 AS bit)
) AS [s] ON [c1].[CartID] = [s].[CartId]
ORDER BY [c1].[CartID], [s].[CartItemID] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"af67c772-d9bc-456d-bfa9-c8cb088541d8","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7F6QO1493:00000009","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7F6QO1493","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:45.975 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@filter_IsNew_Value='True', @p='0', @p2='12'], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[ProductID], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt], [p0].[CreatedById], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt], [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM (
    SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
    FROM [Products] AS [p]
    WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsAvailable] = @filter_IsNew_Value
    ORDER BY [p].[Name]
    OFFSET @p ROWS FETCH NEXT @p2 ROWS ONLY
) AS [p0]
INNER JOIN [Categories] AS [c] ON [p0].[CategoryId] = [c].[CategoryID]
ORDER BY [p0].[Name] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"f4a40842-8f6c-4c30-98cc-dc2b6ceb5a79","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7F6QO1493:0000000B","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7F6QO1493","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:46.054 +01:00 [ERR] Error setting cache key: products:featured:10 {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"c2917ba8-88ae-4c77-a1a5-79978262a6e1","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7F6QO1493:0000000F","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7F6QO1493","MachineName":"MOHAMEDMOUSA","ThreadId":18,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 02:22:46.098 +01:00 [ERR] Error setting cache key: products:all:1:12 {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"f4a40842-8f6c-4c30-98cc-dc2b6ceb5a79","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7F6QO1493:0000000B","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7F6QO1493","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 02:22:46.166 +01:00 [INF] HTTP GET /api/v1.0/products/featured responded 200 in 808.2705 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F6QO1493:0000000F","ConnectionId":"0HNJ7F6QO1493","MachineName":"MOHAMEDMOUSA","ThreadId":18,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:46.189 +01:00 [INF] HTTP GET /api/v1.0/cart responded 200 in 876.4912 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F6QO1493:00000009","ConnectionId":"0HNJ7F6QO1493","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:22:46.230 +01:00 [INF] HTTP GET /api/v1.0/products responded 200 in 914.0173 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F6QO1493:0000000B","ConnectionId":"0HNJ7F6QO1493","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:23:22.748 +01:00 [INF] HTTP OPTIONS /api/v1.0/cart responded 204 in 0.0959 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F6QO1493:00000011","ConnectionId":"0HNJ7F6QO1493","MachineName":"MOHAMEDMOUSA","ThreadId":18,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:23:22.765 +01:00 [INF] Getting cart for user: null or session: e476a691-25fd-4691-9d90-fbcb4b3df7e1 {"SourceContext":"AudioStore.Api.Controllers.CartController","ActionId":"af67c772-d9bc-456d-bfa9-c8cb088541d8","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7F6QO1493:00000013","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7F6QO1493","MachineName":"MOHAMEDMOUSA","ThreadId":18,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:23:22.819 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@sessionId='e476a691-25fd-4691-9d90-fbcb4b3df7e1' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[CartID], [c1].[CreatedAt], [c1].[CreatedById], [c1].[IsActive], [c1].[IsDeleted], [c1].[ModifiedById], [c1].[SessionId], [c1].[UpdatedAt], [c1].[UserId], [s].[CartItemID], [s].[CartId], [s].[CreatedAt], [s].[CreatedById], [s].[IsDeleted], [s].[ModifiedById], [s].[ProductId], [s].[Quantity], [s].[UnitPrice], [s].[UpdatedAt], [s].[ProductID0], [s].[Brand], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedById0], [s].[Description], [s].[Features], [s].[GalleryImages], [s].[IsAvailable], [s].[IsDeleted0], [s].[IsFeatured], [s].[IsNewProduct], [s].[IsPublished], [s].[MainImage], [s].[ModifiedById0], [s].[Name], [s].[Price], [s].[Slug], [s].[StockQuantity], [s].[UpdatedAt0]
FROM (
    SELECT TOP(1) [c].[CartID], [c].[CreatedAt], [c].[CreatedById], [c].[IsActive], [c].[IsDeleted], [c].[ModifiedById], [c].[SessionId], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[SessionId] = @sessionId AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN (
    SELECT [c0].[CartItemID], [c0].[CartId], [c0].[CreatedAt], [c0].[CreatedById], [c0].[IsDeleted], [c0].[ModifiedById], [c0].[ProductId], [c0].[Quantity], [c0].[UnitPrice], [c0].[UpdatedAt], [p0].[ProductID] AS [ProductID0], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt] AS [CreatedAt0], [p0].[CreatedById] AS [CreatedById0], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted] AS [IsDeleted0], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById] AS [ModifiedById0], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt] AS [UpdatedAt0]
    FROM [CartItems] AS [c0]
    INNER JOIN (
        SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)
    ) AS [p0] ON [c0].[ProductId] = [p0].[ProductID]
    WHERE [c0].[IsDeleted] = CAST(0 AS bit)
) AS [s] ON [c1].[CartID] = [s].[CartId]
ORDER BY [c1].[CartID], [s].[CartItemID] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"af67c772-d9bc-456d-bfa9-c8cb088541d8","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7F6QO1493:00000013","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7F6QO1493","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:23:22.927 +01:00 [INF] HTTP GET /api/v1.0/cart responded 200 in 164.3040 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7F6QO1493:00000013","ConnectionId":"0HNJ7F6QO1493","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:28:46.478 +01:00 [INF] Starting AudioStore API {"MachineName":"MOHAMEDMOUSA","ThreadId":2,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:28:47.411 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development. {"EventId":{"Id":10400,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.SensitiveDataLoggingEnabledWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"MOHAMEDMOUSA","ThreadId":2,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:28:47.772 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:28:47.803 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:28:47.844 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:28:47.858 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:28:47.863 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:28:47.876 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:28:47.889 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:28:47.895 +01:00 [INF] Starting database seeding... {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:28:48.079 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@normalizedName='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[CreatedAt], [r].[Description], [r].[IsSystemRole], [r].[Name], [r].[NormalizedName], [r].[UpdatedAt]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @normalizedName {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:28:48.120 +01:00 [INF] Role 'Administrator' already exists {"SourceContext":"AudioStore.Infrastructure.Identity.RoleSeeder","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:28:48.125 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@normalizedName='CUSTOMER' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[CreatedAt], [r].[Description], [r].[IsSystemRole], [r].[Name], [r].[NormalizedName], [r].[UpdatedAt]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @normalizedName {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:28:48.129 +01:00 [INF] Role 'Customer' already exists {"SourceContext":"AudioStore.Infrastructure.Identity.RoleSeeder","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:28:48.147 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@normalizedEmail='ADMIN@AUDIOSTORE.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[CreatedById], [u].[Email], [u].[EmailConfirmed], [u].[FirstName], [u].[IsActive], [u].[IsDeleted], [u].[LastName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[ModifiedById], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RegistrationDate], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @normalizedEmail {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:28:48.175 +01:00 [INF] Admin user already exists: admin@audiostore.com {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:28:48.193 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:28:48.198 +01:00 [INF] Categories already exist, skipping seed {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:28:48.211 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:28:48.215 +01:00 [INF] Products already exist, skipping seed {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:28:48.217 +01:00 [INF] Database seeding completed successfully! {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:28:48.391 +01:00 [WRN] The ASP.NET Core developer certificate is not trusted. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert {"EventId":{"Id":8,"Name":"DeveloperCertificateNotTrusted"},"SourceContext":"Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:29.153 +01:00 [INF] HTTP OPTIONS /api/v1.0/categories responded 204 in 17.7226 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FA9IL341:00000005","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":26,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:29.153 +01:00 [INF] HTTP OPTIONS /api/v1.0/products/featured responded 204 in 17.6854 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FA9IL341:00000003","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:29.153 +01:00 [INF] HTTP OPTIONS /api/v1.0/cart responded 204 in 17.6580 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FA9IL341:00000001","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:29.153 +01:00 [INF] HTTP OPTIONS /api/v1.0/products responded 204 in 17.6403 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FA9IL341:00000007","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:29.414 +01:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license. {"SourceContext":"LuckyPennySoftware.AutoMapper.License","ActionId":"52703843-b0c4-4372-91c0-6ae67996fd5f","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:0000000D","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":30,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:29.441 +01:00 [INF] Getting all categories {"SourceContext":"AudioStore.Api.Controllers.CategoriesController","ActionId":"566b23d7-0a25-43c2-9794-29d99c982fac","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:00000009","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":26,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:29.442 +01:00 [INF] Getting cart for user: null or session: e476a691-25fd-4691-9d90-fbcb4b3df7e1 {"SourceContext":"AudioStore.Api.Controllers.CartController","ActionId":"52703843-b0c4-4372-91c0-6ae67996fd5f","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:0000000D","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":30,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:29.456 +01:00 [INF] Getting products with filter {"SourceContext":"AudioStore.Api.Controllers.ProductsController","ActionId":"f61b97f3-3f2d-4e7e-94f3-a50ba93cef01","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:0000000F","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:29.447 +01:00 [INF] Getting 10 featured products {"SourceContext":"AudioStore.Api.Controllers.ProductsController","ActionId":"49976530-def2-4458-85df-0ad23e64a6b2","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:0000000B","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":28,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:29.523 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit) {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"566b23d7-0a25-43c2-9794-29d99c982fac","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:00000009","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":31,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:29.648 +01:00 [ERR] Error setting cache key: categories:all {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"566b23d7-0a25-43c2-9794-29d99c982fac","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:00000009","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":31,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 02:29:29.696 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@filter_IsNew_Value='True'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Products] AS [p]
WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsAvailable] = @filter_IsNew_Value {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"f61b97f3-3f2d-4e7e-94f3-a50ba93cef01","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:0000000F","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":27,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:29.696 +01:00 [INF] HTTP GET /api/v1.0/categories responded 200 in 503.6901 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FA9IL341:00000009","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":31,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:29.727 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p='10'], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[ProductID], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt], [p0].[CreatedById], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt], [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM (
    SELECT TOP(@p) [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
    FROM [Products] AS [p]
    WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsFeatured] = CAST(1 AS bit) AND [p].[IsAvailable] = CAST(1 AS bit) AND [p].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [p].[CreatedAt] DESC
) AS [p0]
INNER JOIN [Categories] AS [c] ON [p0].[CategoryId] = [c].[CategoryID]
ORDER BY [p0].[CreatedAt] DESC {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"49976530-def2-4458-85df-0ad23e64a6b2","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:0000000B","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:29.791 +01:00 [INF] Executed DbCommand (42ms) [Parameters=[@sessionId='e476a691-25fd-4691-9d90-fbcb4b3df7e1' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[CartID], [c1].[CreatedAt], [c1].[CreatedById], [c1].[IsActive], [c1].[IsDeleted], [c1].[ModifiedById], [c1].[SessionId], [c1].[UpdatedAt], [c1].[UserId], [s].[CartItemID], [s].[CartId], [s].[CreatedAt], [s].[CreatedById], [s].[IsDeleted], [s].[ModifiedById], [s].[ProductId], [s].[Quantity], [s].[UnitPrice], [s].[UpdatedAt], [s].[ProductID0], [s].[Brand], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedById0], [s].[Description], [s].[Features], [s].[GalleryImages], [s].[IsAvailable], [s].[IsDeleted0], [s].[IsFeatured], [s].[IsNewProduct], [s].[IsPublished], [s].[MainImage], [s].[ModifiedById0], [s].[Name], [s].[Price], [s].[Slug], [s].[StockQuantity], [s].[UpdatedAt0]
FROM (
    SELECT TOP(1) [c].[CartID], [c].[CreatedAt], [c].[CreatedById], [c].[IsActive], [c].[IsDeleted], [c].[ModifiedById], [c].[SessionId], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[SessionId] = @sessionId AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN (
    SELECT [c0].[CartItemID], [c0].[CartId], [c0].[CreatedAt], [c0].[CreatedById], [c0].[IsDeleted], [c0].[ModifiedById], [c0].[ProductId], [c0].[Quantity], [c0].[UnitPrice], [c0].[UpdatedAt], [p0].[ProductID] AS [ProductID0], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt] AS [CreatedAt0], [p0].[CreatedById] AS [CreatedById0], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted] AS [IsDeleted0], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById] AS [ModifiedById0], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt] AS [UpdatedAt0]
    FROM [CartItems] AS [c0]
    INNER JOIN (
        SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)
    ) AS [p0] ON [c0].[ProductId] = [p0].[ProductID]
    WHERE [c0].[IsDeleted] = CAST(0 AS bit)
) AS [s] ON [c1].[CartID] = [s].[CartId]
ORDER BY [c1].[CartID], [s].[CartItemID] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"52703843-b0c4-4372-91c0-6ae67996fd5f","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:0000000D","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":31,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:29.797 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@filter_IsNew_Value='True', @p='0', @p2='12'], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[ProductID], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt], [p0].[CreatedById], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt], [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM (
    SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
    FROM [Products] AS [p]
    WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsAvailable] = @filter_IsNew_Value
    ORDER BY [p].[Name]
    OFFSET @p ROWS FETCH NEXT @p2 ROWS ONLY
) AS [p0]
INNER JOIN [Categories] AS [c] ON [p0].[CategoryId] = [c].[CategoryID]
ORDER BY [p0].[Name] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"f61b97f3-3f2d-4e7e-94f3-a50ba93cef01","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:0000000F","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":30,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:29.924 +01:00 [ERR] Error setting cache key: products:featured:10 {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"49976530-def2-4458-85df-0ad23e64a6b2","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:0000000B","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 02:29:30.056 +01:00 [ERR] Error setting cache key: products:all:1:12 {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"f61b97f3-3f2d-4e7e-94f3-a50ba93cef01","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:0000000F","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":30,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 02:29:30.115 +01:00 [INF] HTTP GET /api/v1.0/products/featured responded 200 in 918.4901 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FA9IL341:0000000B","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:30.133 +01:00 [INF] HTTP GET /api/v1.0/cart responded 200 in 908.6419 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FA9IL341:0000000D","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":31,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:30.133 +01:00 [INF] HTTP GET /api/v1.0/products responded 200 in 890.4969 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FA9IL341:0000000F","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":30,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:31.902 +01:00 [INF] Getting cart for user: null or session: e476a691-25fd-4691-9d90-fbcb4b3df7e1 {"SourceContext":"AudioStore.Api.Controllers.CartController","ActionId":"52703843-b0c4-4372-91c0-6ae67996fd5f","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:00000011","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":30,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:31.921 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@sessionId='e476a691-25fd-4691-9d90-fbcb4b3df7e1' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[CartID], [c1].[CreatedAt], [c1].[CreatedById], [c1].[IsActive], [c1].[IsDeleted], [c1].[ModifiedById], [c1].[SessionId], [c1].[UpdatedAt], [c1].[UserId], [s].[CartItemID], [s].[CartId], [s].[CreatedAt], [s].[CreatedById], [s].[IsDeleted], [s].[ModifiedById], [s].[ProductId], [s].[Quantity], [s].[UnitPrice], [s].[UpdatedAt], [s].[ProductID0], [s].[Brand], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedById0], [s].[Description], [s].[Features], [s].[GalleryImages], [s].[IsAvailable], [s].[IsDeleted0], [s].[IsFeatured], [s].[IsNewProduct], [s].[IsPublished], [s].[MainImage], [s].[ModifiedById0], [s].[Name], [s].[Price], [s].[Slug], [s].[StockQuantity], [s].[UpdatedAt0]
FROM (
    SELECT TOP(1) [c].[CartID], [c].[CreatedAt], [c].[CreatedById], [c].[IsActive], [c].[IsDeleted], [c].[ModifiedById], [c].[SessionId], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[SessionId] = @sessionId AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN (
    SELECT [c0].[CartItemID], [c0].[CartId], [c0].[CreatedAt], [c0].[CreatedById], [c0].[IsDeleted], [c0].[ModifiedById], [c0].[ProductId], [c0].[Quantity], [c0].[UnitPrice], [c0].[UpdatedAt], [p0].[ProductID] AS [ProductID0], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt] AS [CreatedAt0], [p0].[CreatedById] AS [CreatedById0], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted] AS [IsDeleted0], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById] AS [ModifiedById0], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt] AS [UpdatedAt0]
    FROM [CartItems] AS [c0]
    INNER JOIN (
        SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)
    ) AS [p0] ON [c0].[ProductId] = [p0].[ProductID]
    WHERE [c0].[IsDeleted] = CAST(0 AS bit)
) AS [s] ON [c1].[CartID] = [s].[CartId]
ORDER BY [c1].[CartID], [s].[CartItemID] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"52703843-b0c4-4372-91c0-6ae67996fd5f","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:00000011","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":30,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:31.947 +01:00 [INF] HTTP GET /api/v1.0/cart responded 200 in 46.8832 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FA9IL341:00000011","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":30,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:35.758 +01:00 [INF] HTTP OPTIONS /api/v1.0/orders responded 204 in 0.1561 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FA9IL341:00000013","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":31,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:35.823 +01:00 [INF] Creating order for user: null {"SourceContext":"AudioStore.Api.Controllers.OrdersController","ActionId":"db7c7219-9437-4777-903c-054ffc66735a","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":27,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:35.840 +01:00 [INF]  Starting order creation - UserId: null, Items count: 2 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"db7c7219-9437-4777-903c-054ffc66735a","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":27,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:35.852 +01:00 [INF]  Items validation passed - 2 items {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"db7c7219-9437-4777-903c-054ffc66735a","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":27,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:35.861 +01:00 [INF]  Order DTO Details: {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"db7c7219-9437-4777-903c-054ffc66735a","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":27,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:35.873 +01:00 [INF]   - CustomerFirstName: Mohamed {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"db7c7219-9437-4777-903c-054ffc66735a","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":27,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:35.888 +01:00 [INF]   - CustomerLastName: Mousa {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"db7c7219-9437-4777-903c-054ffc66735a","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":27,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:35.910 +01:00 [INF]   - CustomerEmail: mohamedellithy765@gmail.com {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"db7c7219-9437-4777-903c-054ffc66735a","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":27,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:35.920 +01:00 [INF]   - CustomerPhone: +393336863167 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"db7c7219-9437-4777-903c-054ffc66735a","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":27,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:35.932 +01:00 [INF]   - ShippingStreet: Localita Vaccarella, Villaggio Don Bosco {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"db7c7219-9437-4777-903c-054ffc66735a","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":27,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:35.953 +01:00 [INF]   - ShippingCity: Lucera {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"db7c7219-9437-4777-903c-054ffc66735a","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":27,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:35.966 +01:00 [INF]   - ShippingPostalCode: 71036 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"db7c7219-9437-4777-903c-054ffc66735a","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":27,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:35.982 +01:00 [INF]   - ShippingCountry: Italy {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"db7c7219-9437-4777-903c-054ffc66735a","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":27,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:36.005 +01:00 [INF]  Beginning database transaction {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"db7c7219-9437-4777-903c-054ffc66735a","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":27,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:36.039 +01:00 [INF]  Generating order number {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"db7c7219-9437-4777-903c-054ffc66735a","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":27,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:29:36.122 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'AudioStore.Infrastructure.Data.AppDbContext'.
System.InvalidOperationException: The configured execution strategy 'SqlServerRetryingExecutionStrategy' does not support user-initiated transactions. Use the execution strategy returned by 'DbContext.Database.CreateExecutionStrategy()' to execute all the operations in the transaction as a retriable unit.
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.OnFirstExecution()
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"db7c7219-9437-4777-903c-054ffc66735a","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":27,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: The configured execution strategy 'SqlServerRetryingExecutionStrategy' does not support user-initiated transactions. Use the execution strategy returned by 'DbContext.Database.CreateExecutionStrategy()' to execute all the operations in the transaction as a retriable unit.
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.OnFirstExecution()
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2026-02-09 02:29:36.259 +01:00 [ERR]  CRITICAL ERROR creating order - Exception Type: InvalidOperationException, Message: The configured execution strategy 'SqlServerRetryingExecutionStrategy' does not support user-initiated transactions. Use the execution strategy returned by 'DbContext.Database.CreateExecutionStrategy()' to execute all the operations in the transaction as a retriable unit. {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"db7c7219-9437-4777-903c-054ffc66735a","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FA9IL341:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":27,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: The configured execution strategy 'SqlServerRetryingExecutionStrategy' does not support user-initiated transactions. Use the execution strategy returned by 'DbContext.Database.CreateExecutionStrategy()' to execute all the operations in the transaction as a retriable unit.
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.OnFirstExecution()
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at AudioStore.Application.Services.Implementations.OrderService.GenerateOrderNumberAsync() in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Application\Services\Implementations\OrderService.cs:line 505
   at AudioStore.Application.Services.Implementations.OrderService.CreateOrderAsync(CreateOrderDTO dto) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Application\Services\Implementations\OrderService.cs:line 66
2026-02-09 02:29:36.296 +01:00 [INF] HTTP POST /api/v1.0/orders responded 400 in 512.7700 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FA9IL341:00000015","ConnectionId":"0HNJ7FA9IL341","MachineName":"MOHAMEDMOUSA","ThreadId":27,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:33.499 +01:00 [INF] Starting AudioStore API {"MachineName":"MOHAMEDMOUSA","ThreadId":2,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:34.454 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development. {"EventId":{"Id":10400,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.SensitiveDataLoggingEnabledWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"MOHAMEDMOUSA","ThreadId":2,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:34.809 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:34.840 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:34.885 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:34.898 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:34.905 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:34.918 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:34.933 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:34.938 +01:00 [INF] Starting database seeding... {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:35.124 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@normalizedName='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[CreatedAt], [r].[Description], [r].[IsSystemRole], [r].[Name], [r].[NormalizedName], [r].[UpdatedAt]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @normalizedName {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:35.164 +01:00 [INF] Role 'Administrator' already exists {"SourceContext":"AudioStore.Infrastructure.Identity.RoleSeeder","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:35.179 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@normalizedName='CUSTOMER' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[CreatedAt], [r].[Description], [r].[IsSystemRole], [r].[Name], [r].[NormalizedName], [r].[UpdatedAt]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @normalizedName {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:35.202 +01:00 [INF] Role 'Customer' already exists {"SourceContext":"AudioStore.Infrastructure.Identity.RoleSeeder","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:35.233 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@normalizedEmail='ADMIN@AUDIOSTORE.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[CreatedById], [u].[Email], [u].[EmailConfirmed], [u].[FirstName], [u].[IsActive], [u].[IsDeleted], [u].[LastName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[ModifiedById], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RegistrationDate], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @normalizedEmail {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:35.277 +01:00 [INF] Admin user already exists: admin@audiostore.com {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:35.297 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:35.307 +01:00 [INF] Categories already exist, skipping seed {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:35.321 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:35.328 +01:00 [INF] Products already exist, skipping seed {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:35.333 +01:00 [INF] Database seeding completed successfully! {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:35.542 +01:00 [WRN] The ASP.NET Core developer certificate is not trusted. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert {"EventId":{"Id":8,"Name":"DeveloperCertificateNotTrusted"},"SourceContext":"Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:53.295 +01:00 [INF] HTTP OPTIONS /api/v1.0/categories responded 204 in 8.7288 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FE2TAE9L:00000005","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:53.295 +01:00 [INF] HTTP OPTIONS /api/v1.0/products/featured responded 204 in 8.6708 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FE2TAE9L:00000007","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:53.295 +01:00 [INF] HTTP OPTIONS /api/v1.0/cart responded 204 in 8.7054 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FE2TAE9L:00000001","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:53.295 +01:00 [INF] HTTP OPTIONS /api/v1.0/products responded 204 in 8.7238 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FE2TAE9L:00000003","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":16,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:53.630 +01:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license. {"SourceContext":"LuckyPennySoftware.AutoMapper.License","ActionId":"6d8b5a67-e4b2-4b7b-930e-ff319bfa3455","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000009","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:53.644 +01:00 [INF] Getting all categories {"SourceContext":"AudioStore.Api.Controllers.CategoriesController","ActionId":"6d8b5a67-e4b2-4b7b-930e-ff319bfa3455","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000009","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:53.644 +01:00 [INF] Getting cart for user: null or session: e476a691-25fd-4691-9d90-fbcb4b3df7e1 {"SourceContext":"AudioStore.Api.Controllers.CartController","ActionId":"8013abbc-eaa2-4a81-8ef4-e4d05caa4222","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:0000000D","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":19,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:53.654 +01:00 [INF] Getting 10 featured products {"SourceContext":"AudioStore.Api.Controllers.ProductsController","ActionId":"d46fd53d-1406-473d-a2d8-acf7eea9b99b","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:0000000B","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:53.665 +01:00 [INF] Getting products with filter {"SourceContext":"AudioStore.Api.Controllers.ProductsController","ActionId":"45016e26-f620-402f-a651-929eb183d788","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:0000000F","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":16,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:53.701 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit) {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"6d8b5a67-e4b2-4b7b-930e-ff319bfa3455","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000009","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:53.807 +01:00 [ERR] Error setting cache key: categories:all {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"6d8b5a67-e4b2-4b7b-930e-ff319bfa3455","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000009","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 02:35:53.830 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@filter_IsNew_Value='True'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Products] AS [p]
WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsAvailable] = @filter_IsNew_Value {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"45016e26-f620-402f-a651-929eb183d788","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:0000000F","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:53.853 +01:00 [INF] HTTP GET /api/v1.0/categories responded 200 in 517.7666 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FE2TAE9L:00000009","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:53.865 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p='10'], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[ProductID], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt], [p0].[CreatedById], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt], [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM (
    SELECT TOP(@p) [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
    FROM [Products] AS [p]
    WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsFeatured] = CAST(1 AS bit) AND [p].[IsAvailable] = CAST(1 AS bit) AND [p].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [p].[CreatedAt] DESC
) AS [p0]
INNER JOIN [Categories] AS [c] ON [p0].[CategoryId] = [c].[CategoryID]
ORDER BY [p0].[CreatedAt] DESC {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"d46fd53d-1406-473d-a2d8-acf7eea9b99b","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:0000000B","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":16,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:53.930 +01:00 [INF] Executed DbCommand (39ms) [Parameters=[@sessionId='e476a691-25fd-4691-9d90-fbcb4b3df7e1' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[CartID], [c1].[CreatedAt], [c1].[CreatedById], [c1].[IsActive], [c1].[IsDeleted], [c1].[ModifiedById], [c1].[SessionId], [c1].[UpdatedAt], [c1].[UserId], [s].[CartItemID], [s].[CartId], [s].[CreatedAt], [s].[CreatedById], [s].[IsDeleted], [s].[ModifiedById], [s].[ProductId], [s].[Quantity], [s].[UnitPrice], [s].[UpdatedAt], [s].[ProductID0], [s].[Brand], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedById0], [s].[Description], [s].[Features], [s].[GalleryImages], [s].[IsAvailable], [s].[IsDeleted0], [s].[IsFeatured], [s].[IsNewProduct], [s].[IsPublished], [s].[MainImage], [s].[ModifiedById0], [s].[Name], [s].[Price], [s].[Slug], [s].[StockQuantity], [s].[UpdatedAt0]
FROM (
    SELECT TOP(1) [c].[CartID], [c].[CreatedAt], [c].[CreatedById], [c].[IsActive], [c].[IsDeleted], [c].[ModifiedById], [c].[SessionId], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[SessionId] = @sessionId AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN (
    SELECT [c0].[CartItemID], [c0].[CartId], [c0].[CreatedAt], [c0].[CreatedById], [c0].[IsDeleted], [c0].[ModifiedById], [c0].[ProductId], [c0].[Quantity], [c0].[UnitPrice], [c0].[UpdatedAt], [p0].[ProductID] AS [ProductID0], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt] AS [CreatedAt0], [p0].[CreatedById] AS [CreatedById0], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted] AS [IsDeleted0], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById] AS [ModifiedById0], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt] AS [UpdatedAt0]
    FROM [CartItems] AS [c0]
    INNER JOIN (
        SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)
    ) AS [p0] ON [c0].[ProductId] = [p0].[ProductID]
    WHERE [c0].[IsDeleted] = CAST(0 AS bit)
) AS [s] ON [c1].[CartID] = [s].[CartId]
ORDER BY [c1].[CartID], [s].[CartItemID] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"8013abbc-eaa2-4a81-8ef4-e4d05caa4222","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:0000000D","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":19,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:53.937 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@filter_IsNew_Value='True', @p='0', @p2='12'], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[ProductID], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt], [p0].[CreatedById], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt], [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM (
    SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
    FROM [Products] AS [p]
    WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsAvailable] = @filter_IsNew_Value
    ORDER BY [p].[Name]
    OFFSET @p ROWS FETCH NEXT @p2 ROWS ONLY
) AS [p0]
INNER JOIN [Categories] AS [c] ON [p0].[CategoryId] = [c].[CategoryID]
ORDER BY [p0].[Name] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"45016e26-f620-402f-a651-929eb183d788","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:0000000F","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":17,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:54.152 +01:00 [ERR] Error setting cache key: products:featured:10 {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"d46fd53d-1406-473d-a2d8-acf7eea9b99b","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:0000000B","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":16,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 02:35:54.206 +01:00 [ERR] Error setting cache key: products:all:1:12 {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"45016e26-f620-402f-a651-929eb183d788","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:0000000F","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":17,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 02:35:54.229 +01:00 [INF] HTTP GET /api/v1.0/products/featured responded 200 in 854.2028 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FE2TAE9L:0000000B","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":16,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:54.235 +01:00 [INF] HTTP GET /api/v1.0/products responded 200 in 798.8676 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FE2TAE9L:0000000F","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":17,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:54.238 +01:00 [INF] HTTP GET /api/v1.0/cart responded 200 in 810.2699 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FE2TAE9L:0000000D","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":19,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:56.395 +01:00 [INF] Getting cart for user: null or session: e476a691-25fd-4691-9d90-fbcb4b3df7e1 {"SourceContext":"AudioStore.Api.Controllers.CartController","ActionId":"8013abbc-eaa2-4a81-8ef4-e4d05caa4222","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000011","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:56.457 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@sessionId='e476a691-25fd-4691-9d90-fbcb4b3df7e1' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[CartID], [c1].[CreatedAt], [c1].[CreatedById], [c1].[IsActive], [c1].[IsDeleted], [c1].[ModifiedById], [c1].[SessionId], [c1].[UpdatedAt], [c1].[UserId], [s].[CartItemID], [s].[CartId], [s].[CreatedAt], [s].[CreatedById], [s].[IsDeleted], [s].[ModifiedById], [s].[ProductId], [s].[Quantity], [s].[UnitPrice], [s].[UpdatedAt], [s].[ProductID0], [s].[Brand], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedById0], [s].[Description], [s].[Features], [s].[GalleryImages], [s].[IsAvailable], [s].[IsDeleted0], [s].[IsFeatured], [s].[IsNewProduct], [s].[IsPublished], [s].[MainImage], [s].[ModifiedById0], [s].[Name], [s].[Price], [s].[Slug], [s].[StockQuantity], [s].[UpdatedAt0]
FROM (
    SELECT TOP(1) [c].[CartID], [c].[CreatedAt], [c].[CreatedById], [c].[IsActive], [c].[IsDeleted], [c].[ModifiedById], [c].[SessionId], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[SessionId] = @sessionId AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN (
    SELECT [c0].[CartItemID], [c0].[CartId], [c0].[CreatedAt], [c0].[CreatedById], [c0].[IsDeleted], [c0].[ModifiedById], [c0].[ProductId], [c0].[Quantity], [c0].[UnitPrice], [c0].[UpdatedAt], [p0].[ProductID] AS [ProductID0], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt] AS [CreatedAt0], [p0].[CreatedById] AS [CreatedById0], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted] AS [IsDeleted0], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById] AS [ModifiedById0], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt] AS [UpdatedAt0]
    FROM [CartItems] AS [c0]
    INNER JOIN (
        SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)
    ) AS [p0] ON [c0].[ProductId] = [p0].[ProductID]
    WHERE [c0].[IsDeleted] = CAST(0 AS bit)
) AS [s] ON [c1].[CartID] = [s].[CartId]
ORDER BY [c1].[CartID], [s].[CartItemID] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"8013abbc-eaa2-4a81-8ef4-e4d05caa4222","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000011","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:35:56.515 +01:00 [INF] HTTP GET /api/v1.0/cart responded 200 in 124.5989 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FE2TAE9L:00000011","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.375 +01:00 [INF] HTTP OPTIONS /api/v1.0/orders responded 204 in 0.1502 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FE2TAE9L:00000013","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.458 +01:00 [INF] Creating order for user: null {"SourceContext":"AudioStore.Api.Controllers.OrdersController","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.495 +01:00 [INF]  Starting order creation - UserId: null, Items count: 2 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.521 +01:00 [INF]  Items validation passed - 2 items {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.547 +01:00 [INF]  Order DTO Details: {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.565 +01:00 [INF]   - CustomerFirstName: Mohamed {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.582 +01:00 [INF]   - CustomerLastName: Mousa {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.605 +01:00 [INF]   - CustomerEmail: mohamedellithy765@gmail.com {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.620 +01:00 [INF]   - CustomerPhone: +393336863167 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.629 +01:00 [INF]   - ShippingStreet: Localita Vaccarella, Villaggio Don Bosco {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.637 +01:00 [INF]   - ShippingCity: Lucera {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.648 +01:00 [INF]   - ShippingPostalCode: 71036 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.655 +01:00 [INF]   - ShippingCountry: Italy {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.666 +01:00 [INF]  Beginning database transaction {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.673 +01:00 [INF]  Generating order number {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.720 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@Format_startswith='ORD-20260209%' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedById], [o].[CustomerEmail], [o].[CustomerFirstName], [o].[CustomerLastName], [o].[CustomerPhone], [o].[IsDeleted], [o].[ModifiedById], [o].[Notes], [o].[OrderDate], [o].[OrderNumber], [o].[PaymentMethod], [o].[ShippingCity], [o].[ShippingCost], [o].[ShippingCountry], [o].[ShippingPostalCode], [o].[ShippingStreet], [o].[Status], [o].[Subtotal], [o].[Tax], [o].[TotalAmount], [o].[UpdatedAt], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderNumber] LIKE @Format_startswith ESCAPE '\'
ORDER BY [o].[OrderNumber] DESC {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.734 +01:00 [INF]  Order number generated: ORD-20260209-00001 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.742 +01:00 [INF]  Retrieving customer info - IsAuthenticated: false {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.757 +01:00 [INF]  Customer info retrieved: Mohamed Mousa (mohamedellithy765@gmail.com) {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.772 +01:00 [INF]  Creating order entity {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.784 +01:00 [INF]  Processing 2 order items {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.795 +01:00 [INF]   - Processing item: ProductId=5, Quantity=2, UnitPrice=3500 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.827 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@id='5'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
FROM [Products] AS [p]
WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[ProductID] = @id {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.841 +01:00 [INF]    Product found: ZX7 Speaker (Stock: 12, Available: true) {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.866 +01:00 [INF]    Stock updated for ZX7 Speaker: New stock=10 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.876 +01:00 [INF]    Order item created: Subtotal=0 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.900 +01:00 [INF]   - Processing item: ProductId=1, Quantity=1, UnitPrice=2999 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.919 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@id='1'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
FROM [Products] AS [p]
WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[ProductID] = @id {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.935 +01:00 [INF]    Product found: XX99 Mark II Headphones (Stock: 15, Available: true) {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.956 +01:00 [INF]    Stock updated for XX99 Mark II Headphones: New stock=14 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.980 +01:00 [INF]    Order item created: Subtotal=0 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:01.990 +01:00 [INF]  Calculating order totals {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:02.019 +01:00 [INF]   - Subtotal: 0 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:02.055 +01:00 [INF]   - Shipping: 5.00 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:02.067 +01:00 [INF]   - Tax: 0.00 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:02.080 +01:00 [INF]   - Total: 5.00 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:02.089 +01:00 [INF]  Saving order to database {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:02.346 +01:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'. {"EventId":{"Id":30004,"Name":"Microsoft.EntityFrameworkCore.Database.Transaction.SavepointsDisabledBecauseOfMARS"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Transaction","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:02.387 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='2026-02-09T01:36:02.2457218Z', @p1=NULL (DbType = Int32), @p2='mohamedellithy765@gmail.com' (Nullable = false) (Size = 255), @p3='Mohamed' (Nullable = false) (Size = 100), @p4='Mousa' (Nullable = false) (Size = 100), @p5='+393336863167' (Nullable = false) (Size = 20), @p6='False', @p7=NULL (DbType = Int32), @p8=NULL (Size = 500), @p9='2026-02-09T01:36:01.7832242Z', @p10='ORD-20260209-00001' (Nullable = false) (Size = 50) (DbType = AnsiString), @p11='Cash on Delivery' (Nullable = false) (Size = 50), @p12='Lucera' (Nullable = false) (Size = 100), @p13='5.00' (Precision = 18) (Scale = 2), @p14='Italy' (Nullable = false) (Size = 100), @p15='71036' (Nullable = false) (Size = 20), @p16='Localita Vaccarella, Villaggio Don Bosco' (Nullable = false) (Size = 200), @p17='1', @p18='0' (Precision = 18) (Scale = 2), @p19='0.00' (Precision = 18) (Scale = 2), @p20='5.00' (Precision = 18) (Scale = 2), @p21=NULL (DbType = DateTime2), @p22=NULL (DbType = Int32), @p42='1', @p23='AudioStore' (Nullable = false) (Size = 100), @p24='1', @p25='2026-01-26T02:29:23.1990615', @p26=NULL (DbType = Int32), @p27='The new XX99 Mark II headphones is the pinnacle of pristine audio. It redefines your premium headphone experience by reproducing the balanced depth and precision of studio-quality sound.' (Nullable = false) (Size = 2000), @p28='Featuring a genuine leather head strap and premium earcups, these headphones deliver superior comfort for those who like to enjoy endless listening. It includes intuitive controls designed for any situation.' (Size = 4000), @p29=NULL (Size = 4000), @p30='True', @p31='False', @p32='True', @p33='True', @p34='True', @p35='/images/products/xx99-mark-two-headphones.jpg' (Nullable = false) (Size = 500), @p36=NULL (DbType = Int32), @p37='XX99 Mark II Headphones' (Nullable = false) (Size = 200), @p38='2999.00' (Precision = 18) (Scale = 2), @p39='xx99-mark-ii-headphones' (Nullable = false) (Size = 250) (DbType = AnsiString), @p40='14', @p41='2026-02-09T01:36:02.2457276Z' (Nullable = true), @p62='5', @p43='AudioStore' (Nullable = false) (Size = 100), @p44='2', @p45='2026-01-26T02:29:23.1990617', @p46=NULL (DbType = Int32), @p47='Stream high quality sound wirelessly with minimal loss. The ZX7 bookshelf speaker uses high-end audiophile components that represents the top of the line powered speakers for home or studio use.' (Nullable = false) (Size = 2000), @p48='Reap the advantages of a flat diaphragm tweeter cone. This provides a fast response rate and excellent high frequencies that lower tiered bookshelf speakers cannot provide.' (Size = 4000), @p49=NULL (Size = 4000), @p50='True', @p51='False', @p52='True', @p53='False', @p54='True', @p55='/images/products/zx7-speaker.jpg' (Nullable = false) (Size = 500), @p56=NULL (DbType = Int32), @p57='ZX7 Speaker' (Nullable = false) (Size = 200), @p58='3500.00' (Precision = 18) (Scale = 2), @p59='zx7-speaker' (Nullable = false) (Size = 250) (DbType = AnsiString), @p60='10', @p61='2026-02-09T01:36:02.2457265Z' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedById], [CustomerEmail], [CustomerFirstName], [CustomerLastName], [CustomerPhone], [IsDeleted], [ModifiedById], [Notes], [OrderDate], [OrderNumber], [PaymentMethod], [ShippingCity], [ShippingCost], [ShippingCountry], [ShippingPostalCode], [ShippingStreet], [Status], [Subtotal], [Tax], [TotalAmount], [UpdatedAt], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
UPDATE [Products] SET [Brand] = @p23, [CategoryId] = @p24, [CreatedAt] = @p25, [CreatedById] = @p26, [Description] = @p27, [Features] = @p28, [GalleryImages] = @p29, [IsAvailable] = @p30, [IsDeleted] = @p31, [IsFeatured] = @p32, [IsNewProduct] = @p33, [IsPublished] = @p34, [MainImage] = @p35, [ModifiedById] = @p36, [Name] = @p37, [Price] = @p38, [Slug] = @p39, [StockQuantity] = @p40, [UpdatedAt] = @p41
OUTPUT 1
WHERE [ProductID] = @p42;
UPDATE [Products] SET [Brand] = @p43, [CategoryId] = @p44, [CreatedAt] = @p45, [CreatedById] = @p46, [Description] = @p47, [Features] = @p48, [GalleryImages] = @p49, [IsAvailable] = @p50, [IsDeleted] = @p51, [IsFeatured] = @p52, [IsNewProduct] = @p53, [IsPublished] = @p54, [MainImage] = @p55, [ModifiedById] = @p56, [Name] = @p57, [Price] = @p58, [Slug] = @p59, [StockQuantity] = @p60, [UpdatedAt] = @p61
OUTPUT 1
WHERE [ProductID] = @p62; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:02.437 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@p63='2026-02-09T01:36:02.2457245Z', @p64=NULL (DbType = Int32), @p65=NULL (DbType = Int32), @p66='1', @p67='5', @p68='2', @p69='3500' (Precision = 18) (Scale = 2), @p70=NULL (DbType = DateTime2), @p71='2026-02-09T01:36:02.2457249Z', @p72=NULL (DbType = Int32), @p73=NULL (DbType = Int32), @p74='1', @p75='1', @p76='1', @p77='2999' (Precision = 18) (Scale = 2), @p78=NULL (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [OrderItems] USING (
VALUES (@p63, @p64, @p65, @p66, @p67, @p68, @p69, @p70, 0),
(@p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, 1)) AS i ([CreatedAt], [CreatedById], [ModifiedById], [OrderId], [ProductId], [Quantity], [UnitPrice], [UpdatedAt], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedById], [ModifiedById], [OrderId], [ProductId], [Quantity], [UnitPrice], [UpdatedAt])
VALUES (i.[CreatedAt], i.[CreatedById], i.[ModifiedById], i.[OrderId], i.[ProductId], i.[Quantity], i.[UnitPrice], i.[UpdatedAt])
OUTPUT INSERTED.[OrderItemID], INSERTED.[IsDeleted], INSERTED.[Subtotal], i._Position; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:02.475 +01:00 [INF]  Order saved to database {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:02.486 +01:00 [INF]  Transaction committed {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:02.499 +01:00 [INF]  Order ORD-20260209-00001 created successfully - Total: 5.00 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:02.513 +01:00 [INF]  Reloading order with includes for mapping {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:02.575 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[@order_Id='1'], CommandType='"Text"', CommandTimeout='30']
SELECT [o1].[Id], [o1].[CreatedAt], [o1].[CreatedById], [o1].[CustomerEmail], [o1].[CustomerFirstName], [o1].[CustomerLastName], [o1].[CustomerPhone], [o1].[IsDeleted], [o1].[ModifiedById], [o1].[Notes], [o1].[OrderDate], [o1].[OrderNumber], [o1].[PaymentMethod], [o1].[ShippingCity], [o1].[ShippingCost], [o1].[ShippingCountry], [o1].[ShippingPostalCode], [o1].[ShippingStreet], [o1].[Status], [o1].[Subtotal], [o1].[Tax], [o1].[TotalAmount], [o1].[UpdatedAt], [o1].[UserId], [s].[OrderItemID], [s].[CreatedAt], [s].[CreatedById], [s].[IsDeleted], [s].[ModifiedById], [s].[OrderId], [s].[ProductId], [s].[Quantity], [s].[Subtotal], [s].[UnitPrice], [s].[UpdatedAt], [s].[ProductID0], [s].[Brand], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedById0], [s].[Description], [s].[Features], [s].[GalleryImages], [s].[IsAvailable], [s].[IsDeleted0], [s].[IsFeatured], [s].[IsNewProduct], [s].[IsPublished], [s].[MainImage], [s].[ModifiedById0], [s].[Name], [s].[Price], [s].[Slug], [s].[StockQuantity], [s].[UpdatedAt0]
FROM (
    SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedById], [o].[CustomerEmail], [o].[CustomerFirstName], [o].[CustomerLastName], [o].[CustomerPhone], [o].[IsDeleted], [o].[ModifiedById], [o].[Notes], [o].[OrderDate], [o].[OrderNumber], [o].[PaymentMethod], [o].[ShippingCity], [o].[ShippingCost], [o].[ShippingCountry], [o].[ShippingPostalCode], [o].[ShippingStreet], [o].[Status], [o].[Subtotal], [o].[Tax], [o].[TotalAmount], [o].[UpdatedAt], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @order_Id
) AS [o1]
LEFT JOIN (
    SELECT [o0].[OrderItemID], [o0].[CreatedAt], [o0].[CreatedById], [o0].[IsDeleted], [o0].[ModifiedById], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[Subtotal], [o0].[UnitPrice], [o0].[UpdatedAt], [p0].[ProductID] AS [ProductID0], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt] AS [CreatedAt0], [p0].[CreatedById] AS [CreatedById0], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted] AS [IsDeleted0], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById] AS [ModifiedById0], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt] AS [UpdatedAt0]
    FROM [OrderItems] AS [o0]
    INNER JOIN (
        SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)
    ) AS [p0] ON [o0].[ProductId] = [p0].[ProductID]
    WHERE [o0].[IsDeleted] = CAST(0 AS bit)
) AS [s] ON [o1].[Id] = [s].[OrderId]
ORDER BY [o1].[Id], [s].[OrderItemID] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"e99a357c-d944-4f05-992b-34a1d38b4c83","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:00000015","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:02.659 +01:00 [INF] HTTP POST /api/v1.0/orders responded 201 in 1265.5703 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FE2TAE9L:00000015","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:02.699 +01:00 [INF] HTTP GET /api/v1.0/orders responded 401 in 7.7582 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FE2TAE9L:00000017","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:02.714 +01:00 [INF] HTTP OPTIONS /api/v1.0/cart/clear responded 204 in 0.0570 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FE2TAE9L:00000019","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:02.748 +01:00 [INF] Clearing cart for user: null or session: e476a691-25fd-4691-9d90-fbcb4b3df7e1 {"SourceContext":"AudioStore.Api.Controllers.CartController","ActionId":"51a405b6-46e5-4a2d-85f5-bd674c96cb5e","ActionName":"AudioStore.Api.Controllers.CartController.ClearCart (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:0000001B","RequestPath":"/api/v1.0/cart/clear","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:02.767 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@sessionId='e476a691-25fd-4691-9d90-fbcb4b3df7e1' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[CartID], [c1].[CreatedAt], [c1].[CreatedById], [c1].[IsActive], [c1].[IsDeleted], [c1].[ModifiedById], [c1].[SessionId], [c1].[UpdatedAt], [c1].[UserId], [s].[CartItemID], [s].[CartId], [s].[CreatedAt], [s].[CreatedById], [s].[IsDeleted], [s].[ModifiedById], [s].[ProductId], [s].[Quantity], [s].[UnitPrice], [s].[UpdatedAt], [s].[ProductID0], [s].[Brand], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedById0], [s].[Description], [s].[Features], [s].[GalleryImages], [s].[IsAvailable], [s].[IsDeleted0], [s].[IsFeatured], [s].[IsNewProduct], [s].[IsPublished], [s].[MainImage], [s].[ModifiedById0], [s].[Name], [s].[Price], [s].[Slug], [s].[StockQuantity], [s].[UpdatedAt0]
FROM (
    SELECT TOP(1) [c].[CartID], [c].[CreatedAt], [c].[CreatedById], [c].[IsActive], [c].[IsDeleted], [c].[ModifiedById], [c].[SessionId], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[SessionId] = @sessionId AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN (
    SELECT [c0].[CartItemID], [c0].[CartId], [c0].[CreatedAt], [c0].[CreatedById], [c0].[IsDeleted], [c0].[ModifiedById], [c0].[ProductId], [c0].[Quantity], [c0].[UnitPrice], [c0].[UpdatedAt], [p0].[ProductID] AS [ProductID0], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt] AS [CreatedAt0], [p0].[CreatedById] AS [CreatedById0], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted] AS [IsDeleted0], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById] AS [ModifiedById0], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt] AS [UpdatedAt0]
    FROM [CartItems] AS [c0]
    INNER JOIN (
        SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)
    ) AS [p0] ON [c0].[ProductId] = [p0].[ProductID]
    WHERE [c0].[IsDeleted] = CAST(0 AS bit)
) AS [s] ON [c1].[CartID] = [s].[CartId]
ORDER BY [c1].[CartID], [s].[CartItemID] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"51a405b6-46e5-4a2d-85f5-bd674c96cb5e","ActionName":"AudioStore.Api.Controllers.CartController.ClearCart (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:0000001B","RequestPath":"/api/v1.0/cart/clear","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:02.827 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p9='1', @p0='1', @p1='2026-02-06T14:57:05.5253030', @p2=NULL (DbType = Int32), @p3='True', @p4=NULL (DbType = Int32), @p5='5', @p6='2', @p7='3500.00' (Precision = 18) (Scale = 2), @p8='2026-02-09T01:36:02.8144053Z' (Nullable = true), @p19='2', @p10='1', @p11='2026-02-06T17:11:32.6489401', @p12=NULL (DbType = Int32), @p13='True', @p14=NULL (DbType = Int32), @p15='1', @p16='1', @p17='2999.00' (Precision = 18) (Scale = 2), @p18='2026-02-09T01:36:02.8144071Z' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [CartItems] SET [CartId] = @p0, [CreatedAt] = @p1, [CreatedById] = @p2, [IsDeleted] = @p3, [ModifiedById] = @p4, [ProductId] = @p5, [Quantity] = @p6, [UnitPrice] = @p7, [UpdatedAt] = @p8
OUTPUT 1
WHERE [CartItemID] = @p9;
UPDATE [CartItems] SET [CartId] = @p10, [CreatedAt] = @p11, [CreatedById] = @p12, [IsDeleted] = @p13, [ModifiedById] = @p14, [ProductId] = @p15, [Quantity] = @p16, [UnitPrice] = @p17, [UpdatedAt] = @p18
OUTPUT 1
WHERE [CartItemID] = @p19; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"51a405b6-46e5-4a2d-85f5-bd674c96cb5e","ActionName":"AudioStore.Api.Controllers.CartController.ClearCart (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:0000001B","RequestPath":"/api/v1.0/cart/clear","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:02.850 +01:00 [INF] Cart cleared (UserId: null, SessionId: e476a691-25fd-4691-9d90-fbcb4b3df7e1) {"SourceContext":"AudioStore.Application.Services.Implementations.CartService","ActionId":"51a405b6-46e5-4a2d-85f5-bd674c96cb5e","ActionName":"AudioStore.Api.Controllers.CartController.ClearCart (AudioStore.Api)","RequestId":"0HNJ7FE2TAE9L:0000001B","RequestPath":"/api/v1.0/cart/clear","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:02.859 +01:00 [INF] HTTP DELETE /api/v1.0/cart/clear responded 200 in 126.4749 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FE2TAE9L:0000001B","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:02.947 +01:00 [INF] HTTP OPTIONS /api/v1.0/orders/number/ORD-20260209-00001 responded 204 in 0.0624 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FE2TAE9L:0000001D","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:36:02.957 +01:00 [INF] HTTP GET /api/v1.0/orders/number/ORD-20260209-00001 responded 401 in 0.4999 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FE2TAE9L:0000001F","ConnectionId":"0HNJ7FE2TAE9L","MachineName":"MOHAMEDMOUSA","ThreadId":22,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:44:57.455 +01:00 [INF] Starting AudioStore API {"MachineName":"MOHAMEDMOUSA","ThreadId":2,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:44:58.532 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development. {"EventId":{"Id":10400,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.SensitiveDataLoggingEnabledWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"MOHAMEDMOUSA","ThreadId":2,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:44:58.931 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:44:58.964 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:44:59.007 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:44:59.022 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:44:59.030 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:44:59.037 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:44:59.052 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:44:59.058 +01:00 [INF] Starting database seeding... {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:44:59.254 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[@normalizedName='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[CreatedAt], [r].[Description], [r].[IsSystemRole], [r].[Name], [r].[NormalizedName], [r].[UpdatedAt]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @normalizedName {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:44:59.292 +01:00 [INF] Role 'Administrator' already exists {"SourceContext":"AudioStore.Infrastructure.Identity.RoleSeeder","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:44:59.297 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@normalizedName='CUSTOMER' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[CreatedAt], [r].[Description], [r].[IsSystemRole], [r].[Name], [r].[NormalizedName], [r].[UpdatedAt]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @normalizedName {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:44:59.301 +01:00 [INF] Role 'Customer' already exists {"SourceContext":"AudioStore.Infrastructure.Identity.RoleSeeder","MachineName":"MOHAMEDMOUSA","ThreadId":10,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:44:59.315 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@normalizedEmail='ADMIN@AUDIOSTORE.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[CreatedById], [u].[Email], [u].[EmailConfirmed], [u].[FirstName], [u].[IsActive], [u].[IsDeleted], [u].[LastName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[ModifiedById], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RegistrationDate], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @normalizedEmail {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:44:59.349 +01:00 [INF] Admin user already exists: admin@audiostore.com {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:44:59.364 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:44:59.371 +01:00 [INF] Categories already exist, skipping seed {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":9,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:44:59.379 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:44:59.384 +01:00 [INF] Products already exist, skipping seed {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:44:59.386 +01:00 [INF] Database seeding completed successfully! {"SourceContext":"Program","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:44:59.654 +01:00 [WRN] The ASP.NET Core developer certificate is not trusted. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert {"EventId":{"Id":8,"Name":"DeveloperCertificateNotTrusted"},"SourceContext":"Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer","MachineName":"MOHAMEDMOUSA","ThreadId":11,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:15.721 +01:00 [INF] HTTP OPTIONS /api/v1.0/categories responded 204 in 3.5077 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FJB3I2FL:00000007","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:15.721 +01:00 [INF] HTTP OPTIONS /api/v1.0/products responded 204 in 3.0864 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FJB3I2FL:00000005","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":7,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:15.721 +01:00 [INF] HTTP OPTIONS /api/v1.0/products/featured responded 204 in 3.0965 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FJB3I2FL:00000003","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:15.721 +01:00 [INF] HTTP OPTIONS /api/v1.0/cart responded 204 in 2.7017 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FJB3I2FL:00000001","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:16.045 +01:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license. {"SourceContext":"LuckyPennySoftware.AutoMapper.License","ActionId":"98198da3-2871-44f5-b918-911b7d4016ec","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:0000000F","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:16.067 +01:00 [INF] Getting all categories {"SourceContext":"AudioStore.Api.Controllers.CategoriesController","ActionId":"c29ab2a0-2063-4e07-bea7-838946605da7","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000009","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:16.067 +01:00 [INF] Getting cart for user: null or session: e476a691-25fd-4691-9d90-fbcb4b3df7e1 {"SourceContext":"AudioStore.Api.Controllers.CartController","ActionId":"98198da3-2871-44f5-b918-911b7d4016ec","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:0000000F","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:16.074 +01:00 [INF] Getting 10 featured products {"SourceContext":"AudioStore.Api.Controllers.ProductsController","ActionId":"a56e2ece-01ca-4b93-81f4-627c9124f7c0","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:0000000D","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:16.083 +01:00 [INF] Getting products with filter {"SourceContext":"AudioStore.Api.Controllers.ProductsController","ActionId":"04d29d75-5d28-479a-b50f-bf44acb8c780","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:0000000B","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":14,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:16.112 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit) {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"c29ab2a0-2063-4e07-bea7-838946605da7","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000009","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:16.218 +01:00 [ERR] Error setting cache key: categories:all {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"c29ab2a0-2063-4e07-bea7-838946605da7","ActionName":"AudioStore.Api.Controllers.CategoriesController.GetCategories (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000009","RequestPath":"/api/v1.0/categories","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 02:45:16.240 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@filter_IsNew_Value='True'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Products] AS [p]
WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsAvailable] = @filter_IsNew_Value {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"04d29d75-5d28-479a-b50f-bf44acb8c780","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:0000000B","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":23,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:16.268 +01:00 [INF] HTTP GET /api/v1.0/categories responded 200 in 520.0080 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FJB3I2FL:00000009","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:16.271 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p='10'], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[ProductID], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt], [p0].[CreatedById], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt], [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM (
    SELECT TOP(@p) [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
    FROM [Products] AS [p]
    WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsFeatured] = CAST(1 AS bit) AND [p].[IsAvailable] = CAST(1 AS bit) AND [p].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [p].[CreatedAt] DESC
) AS [p0]
INNER JOIN [Categories] AS [c] ON [p0].[CategoryId] = [c].[CategoryID]
ORDER BY [p0].[CreatedAt] DESC {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"a56e2ece-01ca-4b93-81f4-627c9124f7c0","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:0000000D","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:16.301 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@filter_IsNew_Value='True', @p='0', @p2='12'], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[ProductID], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt], [p0].[CreatedById], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt], [c].[CategoryID], [c].[CreatedAt], [c].[CreatedById], [c].[Description], [c].[ImageUrl], [c].[IsDeleted], [c].[ModifiedById], [c].[Name], [c].[Slug], [c].[UpdatedAt]
FROM (
    SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
    FROM [Products] AS [p]
    WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[IsAvailable] = @filter_IsNew_Value
    ORDER BY [p].[Name]
    OFFSET @p ROWS FETCH NEXT @p2 ROWS ONLY
) AS [p0]
INNER JOIN [Categories] AS [c] ON [p0].[CategoryId] = [c].[CategoryID]
ORDER BY [p0].[Name] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"04d29d75-5d28-479a-b50f-bf44acb8c780","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:0000000B","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:16.308 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@sessionId='e476a691-25fd-4691-9d90-fbcb4b3df7e1' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[CartID], [c1].[CreatedAt], [c1].[CreatedById], [c1].[IsActive], [c1].[IsDeleted], [c1].[ModifiedById], [c1].[SessionId], [c1].[UpdatedAt], [c1].[UserId], [s].[CartItemID], [s].[CartId], [s].[CreatedAt], [s].[CreatedById], [s].[IsDeleted], [s].[ModifiedById], [s].[ProductId], [s].[Quantity], [s].[UnitPrice], [s].[UpdatedAt], [s].[ProductID0], [s].[Brand], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedById0], [s].[Description], [s].[Features], [s].[GalleryImages], [s].[IsAvailable], [s].[IsDeleted0], [s].[IsFeatured], [s].[IsNewProduct], [s].[IsPublished], [s].[MainImage], [s].[ModifiedById0], [s].[Name], [s].[Price], [s].[Slug], [s].[StockQuantity], [s].[UpdatedAt0]
FROM (
    SELECT TOP(1) [c].[CartID], [c].[CreatedAt], [c].[CreatedById], [c].[IsActive], [c].[IsDeleted], [c].[ModifiedById], [c].[SessionId], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[SessionId] = @sessionId AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN (
    SELECT [c0].[CartItemID], [c0].[CartId], [c0].[CreatedAt], [c0].[CreatedById], [c0].[IsDeleted], [c0].[ModifiedById], [c0].[ProductId], [c0].[Quantity], [c0].[UnitPrice], [c0].[UpdatedAt], [p0].[ProductID] AS [ProductID0], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt] AS [CreatedAt0], [p0].[CreatedById] AS [CreatedById0], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted] AS [IsDeleted0], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById] AS [ModifiedById0], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt] AS [UpdatedAt0]
    FROM [CartItems] AS [c0]
    INNER JOIN (
        SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)
    ) AS [p0] ON [c0].[ProductId] = [p0].[ProductID]
    WHERE [c0].[IsDeleted] = CAST(0 AS bit)
) AS [s] ON [c1].[CartID] = [s].[CartId]
ORDER BY [c1].[CartID], [s].[CartItemID] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"98198da3-2871-44f5-b918-911b7d4016ec","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:0000000F","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:16.476 +01:00 [ERR] Error setting cache key: products:featured:10 {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"a56e2ece-01ca-4b93-81f4-627c9124f7c0","ActionName":"AudioStore.Api.Controllers.ProductsController.GetFeaturedProducts (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:0000000D","RequestPath":"/api/v1.0/products/featured","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 02:45:16.577 +01:00 [ERR] Error setting cache key: products:all:1:12 {"SourceContext":"AudioStore.Infrastructure.Cashing.Services.MemoryCacheService","ActionId":"04d29d75-5d28-479a-b50f-bf44acb8c780","ActionName":"AudioStore.Api.Controllers.ProductsController.GetProducts (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:0000000B","RequestPath":"/api/v1.0/products","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, MemoryCacheEntryOptions options)
   at AudioStore.Infrastructure.Cashing.Services.MemoryCacheService.SetAsync[T](String key, T value, Nullable`1 expiration, CancellationToken cancellationToken) in C:\Users\A1154apulia\Desktop\AudioStore\AudioStore.Infrastructure\Cashing\Services\MemoryCacheService.cs:line 71
2026-02-09 02:45:16.600 +01:00 [INF] HTTP GET /api/v1.0/products/featured responded 200 in 825.5014 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FJB3I2FL:0000000D","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:16.601 +01:00 [INF] HTTP GET /api/v1.0/cart responded 200 in 775.9414 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FJB3I2FL:0000000F","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:16.608 +01:00 [INF] HTTP GET /api/v1.0/products responded 200 in 860.4169 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FJB3I2FL:0000000B","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:17.765 +01:00 [INF] HTTP OPTIONS /api/v1.0/cart/items responded 204 in 0.1009 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FJB3I2FL:00000011","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:17.821 +01:00 [INF] Adding item to cart - Product: 5, Quantity: 1 {"SourceContext":"AudioStore.Api.Controllers.CartController","ActionId":"bbcf8e77-b611-4c1d-bdb8-da4507787105","ActionName":"AudioStore.Api.Controllers.CartController.AddItem (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000013","RequestPath":"/api/v1.0/cart/items","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:17.842 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@sessionId='e476a691-25fd-4691-9d90-fbcb4b3df7e1' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[CartID], [c1].[CreatedAt], [c1].[CreatedById], [c1].[IsActive], [c1].[IsDeleted], [c1].[ModifiedById], [c1].[SessionId], [c1].[UpdatedAt], [c1].[UserId], [s].[CartItemID], [s].[CartId], [s].[CreatedAt], [s].[CreatedById], [s].[IsDeleted], [s].[ModifiedById], [s].[ProductId], [s].[Quantity], [s].[UnitPrice], [s].[UpdatedAt], [s].[ProductID0], [s].[Brand], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedById0], [s].[Description], [s].[Features], [s].[GalleryImages], [s].[IsAvailable], [s].[IsDeleted0], [s].[IsFeatured], [s].[IsNewProduct], [s].[IsPublished], [s].[MainImage], [s].[ModifiedById0], [s].[Name], [s].[Price], [s].[Slug], [s].[StockQuantity], [s].[UpdatedAt0]
FROM (
    SELECT TOP(1) [c].[CartID], [c].[CreatedAt], [c].[CreatedById], [c].[IsActive], [c].[IsDeleted], [c].[ModifiedById], [c].[SessionId], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[SessionId] = @sessionId AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN (
    SELECT [c0].[CartItemID], [c0].[CartId], [c0].[CreatedAt], [c0].[CreatedById], [c0].[IsDeleted], [c0].[ModifiedById], [c0].[ProductId], [c0].[Quantity], [c0].[UnitPrice], [c0].[UpdatedAt], [p0].[ProductID] AS [ProductID0], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt] AS [CreatedAt0], [p0].[CreatedById] AS [CreatedById0], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted] AS [IsDeleted0], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById] AS [ModifiedById0], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt] AS [UpdatedAt0]
    FROM [CartItems] AS [c0]
    INNER JOIN (
        SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)
    ) AS [p0] ON [c0].[ProductId] = [p0].[ProductID]
    WHERE [c0].[IsDeleted] = CAST(0 AS bit)
) AS [s] ON [c1].[CartID] = [s].[CartId]
ORDER BY [c1].[CartID], [s].[CartItemID] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"bbcf8e77-b611-4c1d-bdb8-da4507787105","ActionName":"AudioStore.Api.Controllers.CartController.AddItem (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000013","RequestPath":"/api/v1.0/cart/items","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:17.924 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@id='5'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
FROM [Products] AS [p]
WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[ProductID] = @id {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"bbcf8e77-b611-4c1d-bdb8-da4507787105","ActionName":"AudioStore.Api.Controllers.CartController.AddItem (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000013","RequestPath":"/api/v1.0/cart/items","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:18.128 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='1', @p1='2026-02-09T01:45:18.0588275Z', @p2=NULL (DbType = Int32), @p3=NULL (DbType = Int32), @p4='5', @p5='1', @p6='3500.00' (Precision = 18) (Scale = 2), @p7=NULL (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CartItems] ([CartId], [CreatedAt], [CreatedById], [ModifiedById], [ProductId], [Quantity], [UnitPrice], [UpdatedAt])
OUTPUT INSERTED.[CartItemID], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"bbcf8e77-b611-4c1d-bdb8-da4507787105","ActionName":"AudioStore.Api.Controllers.CartController.AddItem (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000013","RequestPath":"/api/v1.0/cart/items","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:18.171 +01:00 [INF] Product 5 added to cart (UserId: null, SessionId: e476a691-25fd-4691-9d90-fbcb4b3df7e1) {"SourceContext":"AudioStore.Application.Services.Implementations.CartService","ActionId":"bbcf8e77-b611-4c1d-bdb8-da4507787105","ActionName":"AudioStore.Api.Controllers.CartController.AddItem (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000013","RequestPath":"/api/v1.0/cart/items","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":20,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:18.187 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@sessionId='e476a691-25fd-4691-9d90-fbcb4b3df7e1' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[CartID], [c1].[CreatedAt], [c1].[CreatedById], [c1].[IsActive], [c1].[IsDeleted], [c1].[ModifiedById], [c1].[SessionId], [c1].[UpdatedAt], [c1].[UserId], [s].[CartItemID], [s].[CartId], [s].[CreatedAt], [s].[CreatedById], [s].[IsDeleted], [s].[ModifiedById], [s].[ProductId], [s].[Quantity], [s].[UnitPrice], [s].[UpdatedAt], [s].[ProductID0], [s].[Brand], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedById0], [s].[Description], [s].[Features], [s].[GalleryImages], [s].[IsAvailable], [s].[IsDeleted0], [s].[IsFeatured], [s].[IsNewProduct], [s].[IsPublished], [s].[MainImage], [s].[ModifiedById0], [s].[Name], [s].[Price], [s].[Slug], [s].[StockQuantity], [s].[UpdatedAt0]
FROM (
    SELECT TOP(1) [c].[CartID], [c].[CreatedAt], [c].[CreatedById], [c].[IsActive], [c].[IsDeleted], [c].[ModifiedById], [c].[SessionId], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[SessionId] = @sessionId AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN (
    SELECT [c0].[CartItemID], [c0].[CartId], [c0].[CreatedAt], [c0].[CreatedById], [c0].[IsDeleted], [c0].[ModifiedById], [c0].[ProductId], [c0].[Quantity], [c0].[UnitPrice], [c0].[UpdatedAt], [p0].[ProductID] AS [ProductID0], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt] AS [CreatedAt0], [p0].[CreatedById] AS [CreatedById0], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted] AS [IsDeleted0], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById] AS [ModifiedById0], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt] AS [UpdatedAt0]
    FROM [CartItems] AS [c0]
    INNER JOIN (
        SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)
    ) AS [p0] ON [c0].[ProductId] = [p0].[ProductID]
    WHERE [c0].[IsDeleted] = CAST(0 AS bit)
) AS [s] ON [c1].[CartID] = [s].[CartId]
ORDER BY [c1].[CartID], [s].[CartItemID] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"bbcf8e77-b611-4c1d-bdb8-da4507787105","ActionName":"AudioStore.Api.Controllers.CartController.AddItem (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000013","RequestPath":"/api/v1.0/cart/items","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:18.229 +01:00 [INF] HTTP POST /api/v1.0/cart/items responded 200 in 437.5909 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FJB3I2FL:00000013","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:18.762 +01:00 [INF] Getting cart for user: null or session: e476a691-25fd-4691-9d90-fbcb4b3df7e1 {"SourceContext":"AudioStore.Api.Controllers.CartController","ActionId":"98198da3-2871-44f5-b918-911b7d4016ec","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000015","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:18.773 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@sessionId='e476a691-25fd-4691-9d90-fbcb4b3df7e1' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[CartID], [c1].[CreatedAt], [c1].[CreatedById], [c1].[IsActive], [c1].[IsDeleted], [c1].[ModifiedById], [c1].[SessionId], [c1].[UpdatedAt], [c1].[UserId], [s].[CartItemID], [s].[CartId], [s].[CreatedAt], [s].[CreatedById], [s].[IsDeleted], [s].[ModifiedById], [s].[ProductId], [s].[Quantity], [s].[UnitPrice], [s].[UpdatedAt], [s].[ProductID0], [s].[Brand], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedById0], [s].[Description], [s].[Features], [s].[GalleryImages], [s].[IsAvailable], [s].[IsDeleted0], [s].[IsFeatured], [s].[IsNewProduct], [s].[IsPublished], [s].[MainImage], [s].[ModifiedById0], [s].[Name], [s].[Price], [s].[Slug], [s].[StockQuantity], [s].[UpdatedAt0]
FROM (
    SELECT TOP(1) [c].[CartID], [c].[CreatedAt], [c].[CreatedById], [c].[IsActive], [c].[IsDeleted], [c].[ModifiedById], [c].[SessionId], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[SessionId] = @sessionId AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN (
    SELECT [c0].[CartItemID], [c0].[CartId], [c0].[CreatedAt], [c0].[CreatedById], [c0].[IsDeleted], [c0].[ModifiedById], [c0].[ProductId], [c0].[Quantity], [c0].[UnitPrice], [c0].[UpdatedAt], [p0].[ProductID] AS [ProductID0], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt] AS [CreatedAt0], [p0].[CreatedById] AS [CreatedById0], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted] AS [IsDeleted0], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById] AS [ModifiedById0], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt] AS [UpdatedAt0]
    FROM [CartItems] AS [c0]
    INNER JOIN (
        SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)
    ) AS [p0] ON [c0].[ProductId] = [p0].[ProductID]
    WHERE [c0].[IsDeleted] = CAST(0 AS bit)
) AS [s] ON [c1].[CartID] = [s].[CartId]
ORDER BY [c1].[CartID], [s].[CartItemID] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"98198da3-2871-44f5-b918-911b7d4016ec","ActionName":"AudioStore.Api.Controllers.CartController.GetCart (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000015","RequestPath":"/api/v1.0/cart","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:18.792 +01:00 [INF] HTTP GET /api/v1.0/cart responded 200 in 33.0534 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FJB3I2FL:00000015","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.209 +01:00 [INF] HTTP OPTIONS /api/v1.0/orders responded 204 in 0.0525 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FJB3I2FL:00000017","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":23,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.241 +01:00 [INF] Creating order for user: null {"SourceContext":"AudioStore.Api.Controllers.OrdersController","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.258 +01:00 [INF]  Starting order creation - UserId: null, Items count: 1 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.270 +01:00 [INF]  Items validation passed - 1 items {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.283 +01:00 [INF]  Order DTO Details: {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.291 +01:00 [INF]   - CustomerFirstName: Mohamed {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.302 +01:00 [INF]   - CustomerLastName: Mousa {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.314 +01:00 [INF]   - CustomerEmail: mohamedellithy765@gmail.com {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.322 +01:00 [INF]   - CustomerPhone: +393336863167 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.340 +01:00 [INF]   - ShippingStreet: Localita Vaccarella, Villaggio Don Bosco {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.352 +01:00 [INF]   - ShippingCity: Lucera {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.364 +01:00 [INF]   - ShippingPostalCode: 71036 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.374 +01:00 [INF]   - ShippingCountry: Italy {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.385 +01:00 [INF]  Beginning database transaction {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.397 +01:00 [INF]  Generating order number {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.442 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@Format_startswith='ORD-20260209%' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedById], [o].[CustomerEmail], [o].[CustomerFirstName], [o].[CustomerLastName], [o].[CustomerPhone], [o].[IsDeleted], [o].[ModifiedById], [o].[Notes], [o].[OrderDate], [o].[OrderNumber], [o].[PaymentMethod], [o].[ShippingCity], [o].[ShippingCost], [o].[ShippingCountry], [o].[ShippingPostalCode], [o].[ShippingStreet], [o].[Status], [o].[Subtotal], [o].[Tax], [o].[TotalAmount], [o].[UpdatedAt], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderNumber] LIKE @Format_startswith ESCAPE '\'
ORDER BY [o].[OrderNumber] DESC {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.486 +01:00 [INF]  Order number generated: ORD-20260209-00002 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.502 +01:00 [INF]  Retrieving customer info - IsAuthenticated: false {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.516 +01:00 [INF]  Customer info retrieved: Mohamed Mousa (mohamedellithy765@gmail.com) {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.524 +01:00 [INF]  Creating order entity {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.538 +01:00 [INF]  Processing 1 order items {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.554 +01:00 [INF]   - Processing item: ProductId=5, Quantity=1, UnitPrice=3500 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":24,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.584 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@id='5'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
FROM [Products] AS [p]
WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[ProductID] = @id {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.604 +01:00 [INF]    Product found: ZX7 Speaker (Stock: 10, Available: true) {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.619 +01:00 [INF]    Stock updated for ZX7 Speaker: New stock=9 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.630 +01:00 [INF]    Order item created: Subtotal=0 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.639 +01:00 [INF]  Calculating order totals {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.654 +01:00 [INF]   - Subtotal: 0 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.665 +01:00 [INF]   - Shipping: 5.00 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.675 +01:00 [INF]   - Tax: 0.00 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.699 +01:00 [INF]   - Total: 5.00 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.716 +01:00 [INF]  Saving order to database {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.792 +01:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'. {"EventId":{"Id":30004,"Name":"Microsoft.EntityFrameworkCore.Database.Transaction.SavepointsDisabledBecauseOfMARS"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Transaction","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.813 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='2026-02-09T01:45:23.7743328Z', @p1=NULL (DbType = Int32), @p2='mohamedellithy765@gmail.com' (Nullable = false) (Size = 255), @p3='Mohamed' (Nullable = false) (Size = 100), @p4='Mousa' (Nullable = false) (Size = 100), @p5='+393336863167' (Nullable = false) (Size = 20), @p6='False', @p7=NULL (DbType = Int32), @p8=NULL (Size = 500), @p9='2026-02-09T01:45:23.5372980Z', @p10='ORD-20260209-00002' (Nullable = false) (Size = 50) (DbType = AnsiString), @p11='Cash on Delivery' (Nullable = false) (Size = 50), @p12='Lucera' (Nullable = false) (Size = 100), @p13='5.00' (Precision = 18) (Scale = 2), @p14='Italy' (Nullable = false) (Size = 100), @p15='71036' (Nullable = false) (Size = 20), @p16='Localita Vaccarella, Villaggio Don Bosco' (Nullable = false) (Size = 200), @p17='1', @p18='0' (Precision = 18) (Scale = 2), @p19='0.00' (Precision = 18) (Scale = 2), @p20='5.00' (Precision = 18) (Scale = 2), @p21=NULL (DbType = DateTime2), @p22=NULL (DbType = Int32), @p42='5', @p23='AudioStore' (Nullable = false) (Size = 100), @p24='2', @p25='2026-01-26T02:29:23.1990617', @p26=NULL (DbType = Int32), @p27='Stream high quality sound wirelessly with minimal loss. The ZX7 bookshelf speaker uses high-end audiophile components that represents the top of the line powered speakers for home or studio use.' (Nullable = false) (Size = 2000), @p28='Reap the advantages of a flat diaphragm tweeter cone. This provides a fast response rate and excellent high frequencies that lower tiered bookshelf speakers cannot provide.' (Size = 4000), @p29=NULL (Size = 4000), @p30='True', @p31='False', @p32='True', @p33='False', @p34='True', @p35='/images/products/zx7-speaker.jpg' (Nullable = false) (Size = 500), @p36=NULL (DbType = Int32), @p37='ZX7 Speaker' (Nullable = false) (Size = 200), @p38='3500.00' (Precision = 18) (Scale = 2), @p39='zx7-speaker' (Nullable = false) (Size = 250) (DbType = AnsiString), @p40='9', @p41='2026-02-09T01:45:23.7743342Z' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedById], [CustomerEmail], [CustomerFirstName], [CustomerLastName], [CustomerPhone], [IsDeleted], [ModifiedById], [Notes], [OrderDate], [OrderNumber], [PaymentMethod], [ShippingCity], [ShippingCost], [ShippingCountry], [ShippingPostalCode], [ShippingStreet], [Status], [Subtotal], [Tax], [TotalAmount], [UpdatedAt], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
UPDATE [Products] SET [Brand] = @p23, [CategoryId] = @p24, [CreatedAt] = @p25, [CreatedById] = @p26, [Description] = @p27, [Features] = @p28, [GalleryImages] = @p29, [IsAvailable] = @p30, [IsDeleted] = @p31, [IsFeatured] = @p32, [IsNewProduct] = @p33, [IsPublished] = @p34, [MainImage] = @p35, [ModifiedById] = @p36, [Name] = @p37, [Price] = @p38, [Slug] = @p39, [StockQuantity] = @p40, [UpdatedAt] = @p41
OUTPUT 1
WHERE [ProductID] = @p42; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.853 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p43='2026-02-09T01:45:23.7743337Z', @p44=NULL (DbType = Int32), @p45=NULL (DbType = Int32), @p46='2', @p47='5', @p48='1', @p49='3500' (Precision = 18) (Scale = 2), @p50=NULL (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderItems] ([CreatedAt], [CreatedById], [ModifiedById], [OrderId], [ProductId], [Quantity], [UnitPrice], [UpdatedAt])
OUTPUT INSERTED.[OrderItemID], INSERTED.[IsDeleted], INSERTED.[Subtotal]
VALUES (@p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.897 +01:00 [INF]  Order saved to database {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.912 +01:00 [INF]  Transaction committed {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.921 +01:00 [INF]  Order ORD-20260209-00002 created successfully - Total: 5.00 {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.929 +01:00 [INF]  Reloading order with includes for mapping {"SourceContext":"AudioStore.Application.Services.Implementations.OrderService","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:23.988 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@order_Id='2'], CommandType='"Text"', CommandTimeout='30']
SELECT [o1].[Id], [o1].[CreatedAt], [o1].[CreatedById], [o1].[CustomerEmail], [o1].[CustomerFirstName], [o1].[CustomerLastName], [o1].[CustomerPhone], [o1].[IsDeleted], [o1].[ModifiedById], [o1].[Notes], [o1].[OrderDate], [o1].[OrderNumber], [o1].[PaymentMethod], [o1].[ShippingCity], [o1].[ShippingCost], [o1].[ShippingCountry], [o1].[ShippingPostalCode], [o1].[ShippingStreet], [o1].[Status], [o1].[Subtotal], [o1].[Tax], [o1].[TotalAmount], [o1].[UpdatedAt], [o1].[UserId], [s].[OrderItemID], [s].[CreatedAt], [s].[CreatedById], [s].[IsDeleted], [s].[ModifiedById], [s].[OrderId], [s].[ProductId], [s].[Quantity], [s].[Subtotal], [s].[UnitPrice], [s].[UpdatedAt], [s].[ProductID0], [s].[Brand], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedById0], [s].[Description], [s].[Features], [s].[GalleryImages], [s].[IsAvailable], [s].[IsDeleted0], [s].[IsFeatured], [s].[IsNewProduct], [s].[IsPublished], [s].[MainImage], [s].[ModifiedById0], [s].[Name], [s].[Price], [s].[Slug], [s].[StockQuantity], [s].[UpdatedAt0]
FROM (
    SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedById], [o].[CustomerEmail], [o].[CustomerFirstName], [o].[CustomerLastName], [o].[CustomerPhone], [o].[IsDeleted], [o].[ModifiedById], [o].[Notes], [o].[OrderDate], [o].[OrderNumber], [o].[PaymentMethod], [o].[ShippingCity], [o].[ShippingCost], [o].[ShippingCountry], [o].[ShippingPostalCode], [o].[ShippingStreet], [o].[Status], [o].[Subtotal], [o].[Tax], [o].[TotalAmount], [o].[UpdatedAt], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @order_Id
) AS [o1]
LEFT JOIN (
    SELECT [o0].[OrderItemID], [o0].[CreatedAt], [o0].[CreatedById], [o0].[IsDeleted], [o0].[ModifiedById], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[Subtotal], [o0].[UnitPrice], [o0].[UpdatedAt], [p0].[ProductID] AS [ProductID0], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt] AS [CreatedAt0], [p0].[CreatedById] AS [CreatedById0], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted] AS [IsDeleted0], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById] AS [ModifiedById0], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt] AS [UpdatedAt0]
    FROM [OrderItems] AS [o0]
    INNER JOIN (
        SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)
    ) AS [p0] ON [o0].[ProductId] = [p0].[ProductID]
    WHERE [o0].[IsDeleted] = CAST(0 AS bit)
) AS [s] ON [o1].[Id] = [s].[OrderId]
ORDER BY [o1].[Id], [s].[OrderItemID] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"09f8f920-5058-43b1-a4ca-85155bf4876f","ActionName":"AudioStore.Api.Controllers.OrdersController.CreateOrder (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:00000019","RequestPath":"/api/v1.0/orders","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:24.070 +01:00 [INF] HTTP POST /api/v1.0/orders responded 201 in 848.2153 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FJB3I2FL:00000019","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:24.095 +01:00 [INF] HTTP GET /api/v1.0/orders responded 401 in 7.5172 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FJB3I2FL:0000001B","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:24.112 +01:00 [INF] HTTP OPTIONS /api/v1.0/cart/clear responded 204 in 0.0541 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FJB3I2FL:0000001D","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:24.131 +01:00 [INF] Clearing cart for user: null or session: e476a691-25fd-4691-9d90-fbcb4b3df7e1 {"SourceContext":"AudioStore.Api.Controllers.CartController","ActionId":"86ec5c1a-76fa-425a-8c45-65c70e75d7d3","ActionName":"AudioStore.Api.Controllers.CartController.ClearCart (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:0000001F","RequestPath":"/api/v1.0/cart/clear","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:24.148 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@sessionId='e476a691-25fd-4691-9d90-fbcb4b3df7e1' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[CartID], [c1].[CreatedAt], [c1].[CreatedById], [c1].[IsActive], [c1].[IsDeleted], [c1].[ModifiedById], [c1].[SessionId], [c1].[UpdatedAt], [c1].[UserId], [s].[CartItemID], [s].[CartId], [s].[CreatedAt], [s].[CreatedById], [s].[IsDeleted], [s].[ModifiedById], [s].[ProductId], [s].[Quantity], [s].[UnitPrice], [s].[UpdatedAt], [s].[ProductID0], [s].[Brand], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedById0], [s].[Description], [s].[Features], [s].[GalleryImages], [s].[IsAvailable], [s].[IsDeleted0], [s].[IsFeatured], [s].[IsNewProduct], [s].[IsPublished], [s].[MainImage], [s].[ModifiedById0], [s].[Name], [s].[Price], [s].[Slug], [s].[StockQuantity], [s].[UpdatedAt0]
FROM (
    SELECT TOP(1) [c].[CartID], [c].[CreatedAt], [c].[CreatedById], [c].[IsActive], [c].[IsDeleted], [c].[ModifiedById], [c].[SessionId], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[SessionId] = @sessionId AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN (
    SELECT [c0].[CartItemID], [c0].[CartId], [c0].[CreatedAt], [c0].[CreatedById], [c0].[IsDeleted], [c0].[ModifiedById], [c0].[ProductId], [c0].[Quantity], [c0].[UnitPrice], [c0].[UpdatedAt], [p0].[ProductID] AS [ProductID0], [p0].[Brand], [p0].[CategoryId], [p0].[CreatedAt] AS [CreatedAt0], [p0].[CreatedById] AS [CreatedById0], [p0].[Description], [p0].[Features], [p0].[GalleryImages], [p0].[IsAvailable], [p0].[IsDeleted] AS [IsDeleted0], [p0].[IsFeatured], [p0].[IsNewProduct], [p0].[IsPublished], [p0].[MainImage], [p0].[ModifiedById] AS [ModifiedById0], [p0].[Name], [p0].[Price], [p0].[Slug], [p0].[StockQuantity], [p0].[UpdatedAt] AS [UpdatedAt0]
    FROM [CartItems] AS [c0]
    INNER JOIN (
        SELECT [p].[ProductID], [p].[Brand], [p].[CategoryId], [p].[CreatedAt], [p].[CreatedById], [p].[Description], [p].[Features], [p].[GalleryImages], [p].[IsAvailable], [p].[IsDeleted], [p].[IsFeatured], [p].[IsNewProduct], [p].[IsPublished], [p].[MainImage], [p].[ModifiedById], [p].[Name], [p].[Price], [p].[Slug], [p].[StockQuantity], [p].[UpdatedAt]
        FROM [Products] AS [p]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)
    ) AS [p0] ON [c0].[ProductId] = [p0].[ProductID]
    WHERE [c0].[IsDeleted] = CAST(0 AS bit)
) AS [s] ON [c1].[CartID] = [s].[CartId]
ORDER BY [c1].[CartID], [s].[CartItemID] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"86ec5c1a-76fa-425a-8c45-65c70e75d7d3","ActionName":"AudioStore.Api.Controllers.CartController.ClearCart (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:0000001F","RequestPath":"/api/v1.0/cart/clear","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:24.185 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p9='3', @p0='1', @p1='2026-02-09T01:45:18.0588275', @p2=NULL (DbType = Int32), @p3='True', @p4=NULL (DbType = Int32), @p5='5', @p6='1', @p7='3500.00' (Precision = 18) (Scale = 2), @p8='2026-02-09T01:45:24.1778171Z' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [CartItems] SET [CartId] = @p0, [CreatedAt] = @p1, [CreatedById] = @p2, [IsDeleted] = @p3, [ModifiedById] = @p4, [ProductId] = @p5, [Quantity] = @p6, [UnitPrice] = @p7, [UpdatedAt] = @p8
OUTPUT 1
WHERE [CartItemID] = @p9; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"86ec5c1a-76fa-425a-8c45-65c70e75d7d3","ActionName":"AudioStore.Api.Controllers.CartController.ClearCart (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:0000001F","RequestPath":"/api/v1.0/cart/clear","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:24.214 +01:00 [INF] Cart cleared (UserId: null, SessionId: e476a691-25fd-4691-9d90-fbcb4b3df7e1) {"SourceContext":"AudioStore.Application.Services.Implementations.CartService","ActionId":"86ec5c1a-76fa-425a-8c45-65c70e75d7d3","ActionName":"AudioStore.Api.Controllers.CartController.ClearCart (AudioStore.Api)","RequestId":"0HNJ7FJB3I2FL:0000001F","RequestPath":"/api/v1.0/cart/clear","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:24.229 +01:00 [INF] HTTP DELETE /api/v1.0/cart/clear responded 200 in 108.1425 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FJB3I2FL:0000001F","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:24.297 +01:00 [INF] HTTP OPTIONS /api/v1.0/orders/number/ORD-20260209-00002 responded 204 in 0.0644 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FJB3I2FL:00000021","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":21,"EnvironmentName":"Development","Application":"AudioStore.API"}
2026-02-09 02:45:24.338 +01:00 [INF] HTTP GET /api/v1.0/orders/number/ORD-20260209-00002 responded 401 in 18.1264 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7FJB3I2FL:00000023","ConnectionId":"0HNJ7FJB3I2FL","MachineName":"MOHAMEDMOUSA","ThreadId":25,"EnvironmentName":"Development","Application":"AudioStore.API"}
